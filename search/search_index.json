{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":""},{"location":"#about","title":"About","text":"<p>This is a personal website hosted on <code>github pages</code> to documentate my ongoing/finished projects, notes, images and such.</p> <p>Website is created with <code>mkDocs</code> using <code>material</code> theme. Images, documents and binaries are hosted on <code>git LFS</code>.</p> <p>Check notes website at -&gt; https://protoni.github.io/notes/</p>"},{"location":"#site-layout","title":"Site layout","text":"<pre><code>docs/\n    Projects/   # Personal projects ( finished and unfinished, old and new )\n    ...\n</code></pre>"},{"location":"Projects/Electronics/led-display/","title":"LED panel","text":"<p>I have been working on this LED panel display for a while and here are some progress pictures.</p> <p>It's going to be a 97\" display with a crisp crisp resolution of 768x576. So it has about 400k LEDs currently ( 442k when finished ).</p> <p>Initially I was supposed to create a bit wider display, but turns out these bending panels are annoying to install and also the 2.5mm LED pitch does not have the best cost/LED ratio, so I might just leave it this size ( + missing panels from the corner )</p> <p>Also keep in mind that my camera sucks and the display's picture quality is a lot better than in these pictures and videos.</p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#preview","title":"Preview","text":"<p>It's like a moving painting </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#ordering-panels","title":"Ordering panels","text":"<p>Initial order. 24 LED panels, 4 power supplies and 4 receiver boards + cables </p> <p>Panel back side </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#testing-the-panels","title":"Testing the panels","text":"<p>Some initial testing with a few panels </p> <p>Bending LED panel </p> <p>Asynchronous at this point, so I can only send a bunch of files for it to display. </p> <p>Also I made an art</p> <p>Measure the cheap switching power supplies. Seems ok, some small few millivolt noise can be seen. Just wanted to quickly make sure that there's no crazy spikes. </p> <p>Test connecting multiple panels </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#testing-multiple-receiver-cards","title":"Testing multiple receiver cards","text":"<p>Receiver cards can be chained together with RJ45. There's 6 panels per receiver card </p> <p>Testing power consumption from the switching power supply's mains side. ( 30.4W ) </p> <p>Test chaining more panels/receivers  </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#installing","title":"Installing","text":"<p>Initially my idea was to build this structure that holds flat iron bars horizontally</p> <p>Getting parts for the fame </p> <p>Panels resting on flat iron bars  </p> <p>Something to attach the power supplies and receiver cards to  </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#updated-installing-plan","title":"Updated installing plan","text":"<p>I got lazy cutting building the frame for the original idea and I also had an idea to try and install the panels to this shelf rack that's been sitting here without actual shelves for about 2 years now. </p> <p>I thought I would install the power supplies to these boxes, but then decided not to because they are expensive and the ventilation is bad. </p> <p>So I just put the parts directly to the shelf's frame. That'll do for now. </p> <p>Wiring </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#test-hdmi","title":"Test HDMI","text":"<p>I got this video processor ( Colorlight X1 ) so that the panels would act as an actual display rather than as a billboard. </p> <p>Power on and test chaining the receiver cards </p> <p>Setup dual display </p> <p>More panels  </p> <p>Ran out of panels </p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#configuration","title":"Configuration","text":"<p>Without configuring the panels do not look too good with HDMI because it doesn't shut off the LED's when the image has a \"black pixel\". I had to change this 'better gray' setting in Colorlight's iSet software and also adjust the GPU's settings to enable this 'YCbCr' setting. </p> <p>With the initial configuration, you can see that the black parts look more like gray.</p> <p>After adjusting the settings, the black levels are better because the LED's are turned off</p> <p>Also when the receiver cards are shipped, they have a weird issue where the image is flickering so it's unwatchable. I had to revert the firmware to make the fix the flickering, here are some of my notes. The steps include running some random dropbox executables, which is a bit sketchy.</p> <p>Also while fixing the flickering, I used the LEDVISION software to upload my display configuration files to the receiver cards.</p> <pre><code># Download and install\nhttps://www.dropbox.com/s/gkbvenvsp9r5yqi/LEDUpgrade%20SetUp_4.0.28531.exe\n\n# Didn't need this, but it was instructed to download, so saving the link here\nhttps://www.dropbox.com/s/pynyci8rbcz031q/5A%2011.04.fw\n\n# Net settings\nOpen LEDUpgrade as admin\nSetting -&gt; NIC Setting\nSelect correct interface\nSelect it again from the window below\nGo back and restart LEDUpgrade\nClick Detect Receiver Cards\nReceiver should show up\nDowngrade firmware only if Receiver Version is &gt; 11.x\nTick Index\nClick Upgrade Firmware.. -&gt; Preset Firmware -&gt; normal -&gt; normal-11.09 -&gt; Ok\nWait until the downgrade is done\nPower cycle the board for 10sec\nClick 'Detect Receiver Cards' again and verify that the version is 11.x\nClose LEDUpgrade\n</code></pre> <p>Some other notes <pre><code># Upload configuration\nOpen LEDVision\nControl -&gt; LED Screen Settings -&gt; Password is 168\nSelect Net Card tab -&gt; Use Net Card -&gt; Select correct controller\nClick 'Detect Receiver Cards'\nClick 'Receiver Parameters' tab\nClick 'Load' and browser the .rcvbp file\nClick 'Save to Receivers'\nClose LEDVision\n</code></pre></p> <p>Calculating what would be the best LED amount per $ spent. Unfortunately I did this only after ordering the first batch of 2.5mm pitch panels. <pre><code>## Best LED/$ ratio\n## = P1.86\n## = 524.53 LED/$\n\n# P1.66\n323.46 LED/$\n\n# P1.86\n524.53 LED/$\n\n# P2\n500 LED/$\n\n# P2.5\n413.73 LED/$\n\n# P3.076\n321.90 LED/$\n\n# P4\n266.66 LED/$\n\n# P5\n222.60 LED/$\n</code></pre></p> <pre><code># Measuring the size of the display\nd = distance from corner to corner diagonally\nw = width\nh = height\n\nd = \u221a(w\u00b2 + h\u00b2)\n\ne.g.\n\u221a(2560mm\u00b2 + 960mm\u00b2)\n= 2734.08mm\n= 2734.08 * 0.03937\n= 107.64\"\n\n\u221a(2560mm\u00b2 + 1440mm\u00b2)\n= 2937.20\n= 2937.20 * 0.03937\n= 115.63\"\n\n\u221a(1920mm\u00b2 + 1440mm\u00b2)\n= 2400.00\n= 2400.00 * 0.03937\n= 94.48\"\n\nhttps://www.omnicalculator.com/math/diagonal-of-rectangle\n</code></pre> <p>Calculating some prices for different size displays. This was before I found out that the 1.86mm pitch panels has way better \u20ac to pixel ratio. So calculating the price for these resolutions would be cheaper with those. Also non bending panels are a few $ cheaper per panel. <pre><code># Module definition\n1 'module' = 2 * 3 panels, 2 wide, 3 height\n\n# Module size\nWidth per one 'module'   = 320mm * 2 = 640mm ( 256 pixel )\nHeight per one 'module'  = 160mm * 3 = 480mm ( 192 pixel )\n\n# Module price\n1 'module' price ~250\u20ac\n\n# Display sizes\n2x2 = 1280mm x 960mm  =  512 x 384 resolution = 1000\u20ac\n4x2 = 2560mm x 960mm  = 1024 x 384 resolution = 2000\u20ac\n4x3 = 2560mm x 1440mm = 1024 x 576 resolution = 3000\u20ac\n\n# HD display 1280p x 720p:\n4x4 = 3200mm x 1920mm = 1024 x 768 resolution = 4000\u20ac\n\n# Diablo2 original max resolution:\n2.5x2.3 = 1600mm x 1104mm = 640 x 512 = 1437\u20ac\n\n# Diablo2 expansion max resolution:\n3x3 = 1920mm x 1440mm = 768 x 576 = 2250\n</code></pre></p>","tags":["Electronics"]},{"location":"Projects/Electronics/led-display/#summary","title":"Summary","text":"<p>It's becoming too pricey adventure so I think I'll just order the missing corner panels and leave it like that. The thing cost me about 1800\u20ac including shipping so far.</p> <p>Maybe wait for the technology to advance and \u20ac per pixel cost to drop and build and bigger display with better resolution and straight panels, instead of these bending ones.</p> <p>Here's some WoW lofi beats</p> <p>Credits to: https://www.youtube.com/watch?v=Lg21MW4_suQ</p>","tags":["Electronics"]},{"location":"Projects/Electronics/osd3358-linux/","title":"OSD3358 Linux","text":"<p>This is a project I made some time ago.</p> <p> Board rev. v1. </p> <p>Almost finished board straight out of a reflow oven. USB host port and Click board-header connectors still  missing, will hand solder them later on. </p> <p>Board was developed from scratch following Octavo Systems reference design.  Multiple components were not available for ordering so it was not possible to just download their  board design files and order the boards and components.</p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#board-specs","title":"Board specs","text":"<ul> <li>Octavo Systems SiP ( System In Package OSD3358 ) containing:</li> <li>TI AM335x ARM Cortex-A8 1GHz</li> <li>512MB DDR3 Main memory</li> <li>TPS65217 Power management IC</li> <li>TL5209 Low-dropout voltage regulator</li> <li>100+ passive components</li> <li>64GB eMMC ( AM335x supporting only 32GB at the moment )</li> <li>SD card slot</li> <li>USB-A host port</li> <li>Micro-USB client port</li> <li>Some buttons and LEDs</li> <li>BeagleBone Debian 10.03 ( with modified u-boot to be able to boot it on the custom board. )</li> </ul>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#after-reflow-soldering-under-a-magnifying-glass","title":"After reflow soldering, under a magnifying glass","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#board-preview-in-eagle","title":"Board preview in EAGLE","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#board-layout-in-eagle","title":"Board layout in EAGLE","text":"<ul> <li>4 layer board</li> <li>3V3 and GND layers hidden.</li> <li>RED = top signal layer</li> <li>BLUE = bottom signal layer. </li> </ul>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#board-manufacturing-process","title":"Board manufacturing process","text":"<p>Ordering process was easy from https://jlcpcb.com/. They have this detailed process log. </p> <p>You can also view videos of each step of the process which was interesting. </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#bottom-side-of-the-board","title":"Bottom side of the board","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#top-side-of-the-board-without-components","title":"Top side of the board without components","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#board-taped-down-to-hold-it-in-place","title":"Board taped down to hold it in place","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#board-stencil","title":"Board stencil","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#about-to-spread-some-solder-paste","title":"About to spread some solder paste","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#spreading-the-solder-paste-on-to-the-board","title":"Spreading the solder paste on to the board","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#solder-paste-spread-on-to-the-board","title":"Solder paste spread on to the board","text":"<p>Picture taken through a magnifying glass. </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#some-of-the-components-used-in-the-board","title":"Some of the components used in the board","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#all-the-components-placed-before-reflowing","title":"All the components placed, before reflowing","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#reflowing-the-board","title":"Reflowing the board","text":"<p>Custom reflow controller board controlling 4 x 230V infrared heating elements through a 3v DC -&gt; 230V AC SSR ( Solid State Relay ). Temperature is read through a K-type thermocouple connected to MAX31855 thermocouple-to-digital IC. </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#testing-reflow-oven-temperature-plot","title":"Testing reflow oven temperature plot","text":"<ul> <li>ORANGE line = target temperature</li> <li>BLUE line = actual temperature. </li> </ul>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#debugging-linux-not-booting-up-issue","title":"Debugging linux not booting up issue","text":"<p>U-boot not recognizing the board ID because the EEPROM is empty. I had to skip the EEPROM board ID check on u-boot and re-build it. </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#building-u-boot-and-linux-kernel-in-the-middle-of-the-night","title":"Building u-boot and linux kernel in the middle of the night","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#linux-booting-up-for-the-first-time","title":"Linux booting up for the first time","text":"","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux/#links","title":"Links","text":"<ul> <li>https://jlcpcb.com/</li> <li>https://www.digikey.com/</li> <li>https://octavosystems.com/</li> <li>https://octavosystems.com/app_notes/osd335x-design-tutorial/</li> <li>https://octavosystems.com/app_notes/osd335x-eeprom-during-boot/#_Toc382081428</li> </ul>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/","title":"OSD3358 Linux and Click boards","text":"<p>I haven't touched my custom Linux board project in a while  ( https://protoni.fi/Projects/Electronics/osd3358-linux/ ) so I thought that it was about time to start actually doing something with it. </p> <p>I ordered a bunch of these prototyping/development boards from MikroElektronika ( https://www.mikroe.com/ )  called \"Click boards\" and started messing around with them.</p> <p>A lot of configuring and figuring out was required so here are some notes on that.</p> <p>Click boards </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#ethernet","title":"Ethernet","text":"<p>Not a Click board, but the first issue I had was that I couldn't really move files over to the Linux  system and command line editors didn't work all that well over UART.</p> <p>I only had access to the board through USB client or UART pin  as a COM port using Putty so I bought this ~9\u20ac USB -&gt; Ethernet adapter to solve this issue.  It just works out of the box. Just needed to plug it in, figure out the IP address of the Linux board and SSH in to it.</p> <p>Ethernet adapter </p> <p>Internet connection works</p> <p>The RJ45 adapter is also great because the beaglebone Linux has a package management system so I can just install whatever I need using apt-get now that I have internet connection working. </p> <p>Getting the IP</p> <p>There is no ifconfig on beaglebone linux, apparently it only has a ip a command. ( IP highlighted in yellow ) </p> <p>SSH in to the device <pre><code># Open Putty\n\nHost name:\ndebian@192.168.1.60\n\nPort: \n22\n</code></pre></p> <p>Connecting ethernet cable straight to host</p> <p>I have a router where my computer and the Linux board is connected so I didn't have to set any IP settings on the host machine. But here are some notes on that as well.</p> <p>Get the IP</p> <p></p> <p>Configure the IP and connect <pre><code>- Connect the cable to the host machine\n- Win + R -&gt; ncpa.cpl\n- Right click the TP Link adapter -&gt; Properties -&gt; Internet Protocol Version 4 (TCP/IPv4)\n-&gt; Properties -&gt; General -&gt; Use the following IP address:\n-- IP address:      192.168.6.5\n-- Subnet mask:     255.255.255.0\n-- Default gateway: 192.168.6.0\n</code></pre></p> <p>Not sure why, but I had to reboot the Linux board first to make the settings work. I also had to ping from the Linux device to my host machine first to make the ping work the other way too. Not sure if this is due to some Windows firewall settings or what.</p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#lte-modem","title":"LTE modem","text":"<p>The LTE modem Click board that I have is this one: * https://www.mikroe.com/lte-cat1-eu-click-for-europe</p> <p>It has an Cinterion ELS61 modem chip in it. Docs: * https://m2m.dk/wp-content/uploads/2019/12/ELS61-E-AT-Command-Set-V02.000-15.08.2018.pdf</p> <p>I had a lot of issues with getting a mobile interface on linux setup with the modem and in the end I didn't get it to work through the UART pins that are in the Click board headers. It probably requires some drivers to actually work.</p> <p>Instead I connected a micro USB cable from the Linux board's USB host port to the Click board's USB client port.</p> <p>USB connected to modem </p> <p>Setting up the mobile interface</p> <p>I spent quite a while hopelessly searching the net to solve the issues that I had with the modem internet connection setup. The modem itself worked right away. I got a pre-paid SIM card from the nearest kiosk just before it closed at 10pm  so I got to test the modem right away. I tested the modem by calling from it to my own cell phone.</p> <p>The first port on Linux board that I tested was /dev/ttyACM0. The minicom connection seemed to open and all of the AT commands seemed to work except AT^SWWAN that is supposed to open the internet connection.</p> <p>Minicom modem connection works </p> <p>By default, it just gave an error called \"Error\", but after digging around I was able to set an extended error mode on, which can be set on with this command: <pre><code>AT+CMEE=2\n</code></pre></p> <p>Errors can be queried with this: <pre><code>AT+CEER\n</code></pre></p> <p>After setting the extended settings mode I was getting 2 types of errors: <pre><code>CME ERROR: 100\n</code></pre> And the other one was: <pre><code>+CME ERROR: operation not allowed\n</code></pre></p> <p>Never solved those issues, I just happened to test the /dev/ttyACM1 after battling with this for a while and it worked!</p> <p>Setup mobile interface</p> <p>The internet parameter is the APN of the operator. <pre><code>1. Connect USB host -&gt; Click board USB client with a USB cable\n2. sudo minicom -o -D /dev/ttyACM1 -b 115200\n3. AT+CGDCONT=1,\"IP\",\"internet\"\n4. AT^SWWAN=1,1\n5. Exit with Ctrl + A -&gt; X -&gt; Yes\n6. sudo ping google.com\n7. ip a\n</code></pre></p> <p>The mobile connection works </p> <p>Mobile interface </p> <p>Before I decided to test the USB, I spent hours on trying to make the UART route work. I found only 2 other people on some forums who seemed to have a similar error. Last posts to those threads were from years ago and no responses after that.. frustrating. I guess they gave up too.</p> <p>These were some of the errors I got: <pre><code>PDP context deactivation\n</code></pre> <pre><code>Last PDN disconnection not allowed\n</code></pre> <pre><code>Unknown error\n</code></pre></p> <p>After I had spent the whole night trying to solve these errors I happened to get it to work with the /dev/ttyACM1 way explained earlier.</p> <p>Some minicom notes <pre><code>### Minicom ###\n# Minicom enable carriage return new lines\nCtrl + A -&gt; U\n\n# Minicom quit\nCtrl + A -&gt; X -&gt; Yes\n\n# Minicom enable echo\nCtrl + E\n\n# Minicom clear screen\nCtrl + A -&gt; C\n</code></pre></p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#temperature","title":"Temperature","text":"<p>The temperature Click board that I got is this one: * https://www.mikroe.com/thermo-14-click.</p> <p>It has an STTS22H temperature sensor IC in it.</p> <p>The first problem was that the Beaglebone Linux that I'm running on the board currently didn't have I2C1 bus, that I have routed to the Click board headers. It had to be configured in the device tree and that was an whole nother journey. I'll probably do a separate post for the device tree tuning.</p> <p>After getting the I2C1 bus working, it was possible to get access to the temperature sensor.</p> <p>List i2c buses <pre><code>debian@arm:~$ /usr/sbin/i2cdetect -l\ni2c-1   i2c             OMAP I2C adapter                        I2C adapter\ni2c-2   i2c             OMAP I2C adapter                        I2C adapter\ni2c-0   i2c             OMAP I2C adapter                        I2C adapter\n</code></pre></p> <p>Probe i2c1 bus</p> <p>Here we can see that the temperature sensor 0x3f is detected. \"--\" means that no devices were found. \"UU\" can also be found sometimes, it means that it is an reserved address. </p> <p>Reading temperature values</p> <p>I found a python program for some other I2C temperature sensor online, so I modified it to be able to read the temperature from the STTS22H as well. <pre><code>import time\nimport smbus\n\n# I2C channel\ni2c_ch = 1\n\n# STTS22H address on the I2C bus\ni2c_address = 0x3f\n\n# Register addresses\nreg_temp_l = 0x06 # Low temperature bytes\nreg_temp_h = 0x07 # High temperature bytes\nreg_config = 0x04 # Control settings register\n\n# Control register settings\nctrl_reg = 0xAA\n\n# Read temperature registers and calculate Celsius\ndef read_temp():\n\n    # Read temperature registers\n    val_l = bus.read_i2c_block_data(i2c_address, reg_temp_l, 1)\n    val_h = bus.read_i2c_block_data(i2c_address, reg_temp_h, 1)\n\n    # Combine high and low registers\n    temperature = (val_h[0] &lt;&lt; 8) | val_l[0]\n\n    # Convert to celcius\n    return temperature / 100.0\n\n# Initialize I2C\nbus = smbus.SMBus(i2c_ch)\n\n# Print old control register value\nval = bus.read_i2c_block_data(i2c_address, reg_config, 1)\nprint(\"Old control register value:\", val)\n\n# Set configs\nval[0] = ctrl_reg\nbus.write_i2c_block_data(i2c_address, reg_config, val)\n\n# Print new control register value\nval = bus.read_i2c_block_data(i2c_address, reg_config, 1)\nprint(\"New control register value:\", val)\n\n# Print temperature value in a loop\nwhile True:\n    print(\"Current temperature: \" + str(read_temp()), \"C\")\n    time.sleep(1)\n</code></pre></p> <p>Running the script </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#gps","title":"GPS","text":"<p>The Click board that I got for GPS location reading is this one: * https://www.mikroe.com/gps-4-click</p> <p>It contains a Quectel L70 GPS chip and it can be communicated with trough UART.</p> <p>Setting up gpsd <pre><code>sudo apt-get install gpsd gpsd-clients\n</code></pre></p> <p>Output GPS data to see that the chip works</p> <p>At this point some data should already be seen in the terminal if the device works and correct tty port is used. <pre><code>sudo cat /dev/ttyS0\n</code></pre></p> <p>Disable gpsd that uses the default settings <pre><code>sudo systemctl stop gpsd.socket\nsudo systemctl disable gpsd.socket\n</code></pre></p> <p>Set permissions and user groups for gpsd <pre><code>sudo usermod -a -G dialout gpsd\nsudo chown root:dialout /dev/ttyS0\n</code></pre></p> <p>I keep getting these errors still <pre><code>Oct 22 14:36:12 arm gpsd[1329]: gpsd:ERROR: SER: device open of /dev/ttyS0 failed: Permission denied - retrying read-only\nOct 22 14:36:12 arm gpsd[1329]: gpsd:ERROR: SER: read-only device open of /dev/ttyS0 failed: Permission denied\nOct 22 14:36:12 arm gpsd[1329]: gpsd:ERROR: /dev/ttyS0: device activation failed.\nOct 22 14:36:12 arm gpsd[1329]: gpsd:ERROR: /dev/ttyS0: activation failed, freeing device\n</code></pre></p> <p>A hacky fix to make it actually work. Fix later. <pre><code>sudo mv /dev/ttyS0 /dev/ttyS1\nsudo chmod 666 /dev/ttyS1\n</code></pre></p> <p>Start the daemon <pre><code>sudo rm /var/run/gpsd.sock\nsudo gpsd /dev/ttyS1 -F /var/run/gpsd.sock\n</code></pre></p> <p>GPS monitoring tools <pre><code>sudo gpsmon\nsudo cgps -s\n</code></pre></p> <p>gpsmon</p> <p>I don't have a GPS antenna, so gps can't see any satellites ( Quality and Sats field ) </p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#wifi","title":"Wifi","text":"<p>Not a Click board, but I remembered that I bought this wifi module some years ago and decided to test it as well: * https://components101.com/development-boards/nodemcu-esp8266-pinout-features-and-datasheet</p> <p>It has an ESP-12E module containing a ESP8266 chip which includes a  Tensilica Xtensa 32-bit LX106 RISC microprocessor. NodeMCU has 128 KB RAM and 4MB of Flash memory.</p> <p>Connected via UART pins </p> <p>Flashing the firmware</p> <p>I found this \"slip router\" project from github which allows me to setup a Linux interface to communicate with the Wifi chip. * https://github.com/martin-ger/esp_slip_router</p> <p>I went on and started setting up the ESP SDK so that I could build the slip router. Later on I realized that the github repo has the pre built binaries already. But now that I have the SDK setup, I can for example change the UART baud rate and so on.</p> <p>Setup ESP SDK <pre><code>git clone https://github.com/pfalcon/esp-open-sdk\nsudo apt-get install make unrar-free autoconf automake libtool gcc g++ gperf \\\n    flex bison texinfo gawk ncurses-dev libexpat-dev python-dev python python-serial \\\n    sed git unzip bash help2man wget bzip2\nsudo apt-get install libtool-bin\ncd esp-open-sdk\nmake\nexport PATH=\"/PATH_TO_ESP_PROJECT/esp-open-sdk/xtensa-lx106-elf/bin:$PATH\"\n</code></pre></p> <p>Build the slip router and flash the firmware</p> <pre><code>cd ..\ngit clone https://github.com/martin-ger/esp_slip_router\ncd esp_slip_router\nmake\nmake flash\n</code></pre> <p>Setting up the wifi interface <pre><code>sudo slattach -L -p slip -s 115200 /dev/ttyS0&amp;\nsudo ifconfig sl0 192.168.240.2 pointopoint 192.168.240.1 up mtu 1500\nsudo route add -net 192.168.4.0/24 gw 192.168.240.1\ntelnet 192.168.240.1 7777\nCMD&gt;set ap_ssid ESP8266 \nCMD&gt;set ap_password temppwd\nCMD&gt;set use_ap 1\nCMD&gt;save\nCMD&gt;reset\n</code></pre></p> <p>The \"slip\" interface on Linux </p> <p>Testing SSH with termux on Android, it works !</p> <p>I enabled wifi on my phone, the ESP8266 access point showed up and I was able to connect to it. </p> <p>I also tried to flash the firmware on the target Linux board <pre><code>termios.error: (25, 'Inappropriate ioctl for device')\n</code></pre></p> <p>Not sure if this is even supposed to be possible, but here's the command I tried <pre><code>sudo esptool.py --port /dev/ttyS0 write_flash -fs 4MB 0x00000 firmware/0x00000.bin 0x10000 firmware/0x10000.bin\n</code></pre></p> <p>It failed. And I'm not sure if it's just an coincidence or did it break something, but now when I try to for example update the board with apt-get, it gives me this error \ud83d\ude33 <pre><code>Reading package lists... Error!\nE: lzma_read: Read error (10)\nW: You may want to run apt-get update to correct these problems\nE: The package cache file is corrupted\n</code></pre></p> <p>Quick google search suggested that it is caused by some python serial module mismatch and to resolve, I should install: <pre><code>sudo apt-get install python-serial\n</code></pre></p> <p>This is where I noticed the lzma_read error above. Need to investigate more.</p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#accelerometer-and-gyroscope","title":"Accelerometer and Gyroscope","text":"<p>!NOT DONE YET!</p> <p>Couldn't get the accelerometer working yet. I'll update this post if and when I can see some progress with this.</p> <p>I was able to build this driver for the chip: * https://github.com/BoschSensortec/BMI270-Sensor-API</p> <p>Initialization results in error</p> <p>The driver is able to at least read some I2C registers before failing to  this configuration loading check with this error: <pre><code>Error -9 : Configuration loading error\n</code></pre></p> <p>If solving this begings to take too long, I'll probably test the driver with SPI bus. For that I need to modify the device tree again and add the SPI to it.</p>","tags":["electronics"]},{"location":"Projects/Electronics/osd3358-linux-and-click-boards/#can","title":"CAN","text":"<p>!NOT DONE YET!</p> <p>The AM335x processor already has 2 CAN buses, but they are not currently routed to anywhere on the board.</p> <p>This is the CAN board: * https://www.mikroe.com/mcp25625-click</p>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/","title":"Phone Extension","text":"","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#links","title":"Links","text":"<ul> <li>Github:<ul> <li>https://github.com/protoni/phone-extension</li> </ul> </li> <li>STM32F1 MCU<ul> <li>https://mm.digikey.com/Volume0/opasdata/d220001/medias/docus/1139/STM32F103x8,B.pdf</li> </ul> </li> <li>INA226 Bi-Directional Current and Power Monitor with I2C Compatible Interface<ul> <li>https://www.ti.com/lit/ds/symlink/ina226.pdf?ts=1697789639510&amp;ref_url=https%253A%252F%252Fwww.google.com%252F</li> </ul> </li> </ul>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#what-is-this","title":"What is this?","text":"<p>This is an old project that I had abandoned close to 3 years ago now. I salvaged backups and old designs/what's left of them from a cloud drive and decided to add them to github and also write this page to remind myself to continue working on this. </p> <p>Maybe it gets some attention at some point since it's easier to look at it here.</p>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#original-design","title":"Original design","text":"<p>I had done this android -&gt; arduino test project some time ago before I started designing the custom PCB:</p> <p>https://github.com/protoni/android-usb</p> <p>If I remember correctly the STM32F1 USB connection was supposed to work similar to arduino or maybe arduino has that same MCU, but anyway the idea was to do something similar with this project.</p> <p>Also at some point I was hoping to add bluetooth connection or some other remote connection and a battery for the hardware addon. That way you could connect the device to some data source and not have to be standing right next to it with a USB cable connected to the phone.</p> <p>Below are some original design notes. Untouched since, except changing some formatting. Also nothing is tested or properly reviewed at this point.</p> <pre><code># Create a circuit board that ables a smart phone to control and read various\n# input/output sources through a USB.\n\n\n# Smart phone should be able to read at least these signal source:\n- CAN\n- SPI\n- I2C\n- UART\n\n\n# Smart phone should be able to control these outputs:\n- Digital outputs\n- Analog outputs\n- PWM output\n\n\n# Maybe??:\n- Current measurement:\n  - Current sensor\n- Voltage + current measurement:\n  - INA226 ( Expensive on JLCPCB ) *I2C\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#some-pictures-of-schematics","title":"Some pictures of schematics","text":"","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#investigations","title":"Investigations","text":"<p>Here's some investigations/thoughts and brainstorming on the design details</p>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#mcu","title":"MCU","text":"<pre><code># Which MCU?\nSTM32F1 seems to have a lot of features built in, like:\n- 72 MHz maximum frequency\n- USB 2.0 full speed\n- 2x I2C\n- 3x USART\n- 2x SPI\n- 1x CAN\n- 3x 16bit timers\n- 1x 16bit motor control PWM timer\n- 2x 12bit A/D converters\n- 80 I/Os ( 16 external interrupts )\n\n# MCU Power pin decoupling\n- Decoupling capacitors must be placed as close as possible to the \n  microcontroller supply pins (VDD)\n- In addition, each power supply pair should be decoupled with filtering\n  ceramic capacitors C (100 nF) and a chemical capacitor C of about 10 \u03bcF\n  connected in parallel on the STM32F10xxx device\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#power-supply","title":"Power supply","text":"<pre><code># Which power supply?\n- VDD = 3.3V ( MCU power supply pin )\n- Need to drop USB 5V -&gt; 3.3V for the MCU\n- Linear, LDO, or switching regulator?\n  - A linear regulator typically requires a minimum of 3 volts difference between\n    the input and output voltages.  Low dropout regulators generally require less\n    than 1V differential\n- switching regulators are very noisy.\n- If the output current is over a few amps, the switcher is almost always the\n  first choice, primarily because of its efficiency, which is related to power\n  savings and thermal dissipation. Below a few hundred milliwatts, the LDO is\n  often the better choice, because its inefficiency relative to the switcher is\n  often negligible\n- STM32F1 VDD total current: max 150mA\n- Conclusions: Use LDO. Which one?\n  - Needs atleast 150mA output\n  - Check capacitor requirements\n  - Doesn't need to have adjustable output voltage.'\n  - Use for example: XC6206P332MR\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#oscillator","title":"Oscillator","text":"<pre><code># Internal or external oscillator?\n- Accurate frequency and frequency stability are reasons to use a \n  external ceramic resonator or crystal.\n- A crystal is much more accurate, and necessary if you are doing some other \n  types of communication like CAN, USB, or ethernet\n- Internal clocks are not precise, can be affected by noise\n- Conclusion: Use external crystal. Which one?\n  - STM32F1 needs 4MHz - 16MHz crystal, typical: 8MHz\n  - Use for example: X50328MSB2GI\n\n\n# Count load capacitor values for the crystal:\n- CL = (C1 * C2) / (C1 + C2) + Cstray\n- Cstray: Every trace an part on the PCB\n  will affect the stray capacitance.\n- A good guesstimate for stray capacitance is 2 - 5 pF.\n- Load capacitance: X50328MSB2GI specifies a 20 pF load capacitance.\n- Conclusions: Loading capacitors:\n  - C1, C2 = 2*CL \u2013 2*Cstray\n  - C1, C2 = 2 x 20pF - 2 x 5pF\n  - C1, C2 = 30pF\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#dac","title":"DAC","text":"<pre><code># Digital to analog\n- Digital potentiometer or DAC?\n  - DACs are higher resolution\n- STM32F1 doesn't have a digital to analog converter ( DAC )'\n- Conclusions: Use external DAC, which one?\n  - 1MCP4725 *I2C ( DAC ) ( Expensive on JLCPCB )\n  - AD5160 *SPI ( Digi pot ) ( Expensive on JLCPCB )\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#pcb","title":"PCB","text":"<pre><code># Board assembly\n- In JLCPCB \"Basic Part\" Cost no extra \u20ac\u20ac.\n- In JLCPCB \"Extended Part\" column means that they will have to change the\n  component on the Pick and Place machine so it will cost an extra 3\u20ac to place\n  that component into the board.\n- Do not place AD5160\n- Do not place INA226\n- Set INA226 Shunt resistor as 0805 or bigger\n- Set INA226 I2C address selection resistors 0805 or bigger\n- Set SN65HVD230 Rs pin pull down resistor 0805 or bigger\n\n# PCB layout\n- LSF010 symbol missing. Make one for example based on LM4810 symbol.\n</code></pre> <pre><code># Over voltage protection for UART, SPI, I2C, CAN buses\n- Externally connected BUSes can have higher than 3.3V voltage, so possibly higher\n  voltage needs to be translated to 3.3V. Voltage divider on high speed BUSes can\n  cause problems.\n- TVS or Zener diode?\n- ESD protection IC. USBLC6-2\n- BUS transceiver. 74LS245\n- Voltage level translator. TXB0108 ( includes 15kV ESD protection )\n  - 10K OE pulldown resistor?\n  - 0.1uF caps to VCCA, VCCB\n  - i2c doesn't work well with TXB0108, because pull-up resistors mess-up the'\n    direction sensing\n  - Use LSF010 as a voltage level translator for I2C? Needs ESD protection\n- Use switch to select between VrefB ( output voltage ) of TXB0108 and LSF010.\n- SN65HVD230 CAN transceiver\n- TXB0104 for SPI\n- TXB0102 for UART\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#can","title":"CAN","text":"<pre><code># CAN Transceiver SN65HVD230\n- Vref pin can be connected to the common mode point of a split termination to\n  help further stabilize the common mode voltage of the bus. If the Vref pin is\n  not used, it may be left floating.\n- RS pin: Has 3 modes:\n  - To enable high speed mode, connect RS to ground\n    ( High speed mode enables the transimmter output transistors to switch on and\n    off as fast as possible with no limitations on the rise and fall slopes )\n  - To adjust rise and fall slopes, connect a resistor in serias between RS and\n    ground ( The slope will be proportional to the pin's output current. With a'\n    resistor value of 10 kOhm, the device will have a slew rate of ~15 V/us, and\n    with a resistor value of 100 kOhm, the device will have a slew rate of ~2 V/\n    us.)\n- Configure MCU output pins as push-pull\n\n\n# CAN filtering\n- Electromagnetic interference emitted from an Electronic Control Module ( ECU )\n  through the CAN transceiver can be filtered, thus limiting unwanted\n  high-frequancy noise on the communication bus.\n\n\n# CAN filtering ( Termination )\n- The split termination technique uses two resistors that are equal to one half\n  the cable's characteristic impedance (typically 60\u03a9 each), with a capacitor'\n  placed between the common-mode point and ground (typically between 1-100nF).\n- Split termination improves the electromagnetic emissions behavior of the network\n  by eliminating fluctuations in the bus common mode voltages at the start and end\n  of message transmissions.\n- A typical value of CL for a high-speed CAN is 4.7 nF, which generates a 3-dB point at 1.1 Mbps.\n\n\n# CAN filtering ( common mode choke )\n- A common mode choke is an electrical filter that blocks high frequency noise\n  common to two or more data or power lines while allowing the desired DC or\n  low-frequency signal to pass\n- Common-mode chokes are frequently used in automotive CAN networks to increase\n  system reliability with respect to electromagnetic compatibility ( EMC)\n- Another reason for using a common-mode choke is attempting to improve the\n  susceptivility ( immunity ) of the transceiver to electromagnetic disturbances\n  on the bus. \n- Common mode choke: DLW32SH510XK2L\n\n\n# CAN filtering ( TVS diode )\n- Transient voltage suppressor ( TVS ) are very commonly used and can help clamp\n  the amount of energy that reaches the transceiver.\n- Transient voltage suppressors are the preferred protection components for CAN\n  bus applications due to their low capacitance, fast response times and high\n  peak power dissipation limits.\n- The quick response times in the order of a few picoseconds enable these devices\n  to clamp the energy of very fast transients like ESD and EFT.\n- TVS diodes: NUP2105L\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#spi-and-uart","title":"SPI and UART","text":"<pre><code># TXB0104 and TXB0102 ( SPI and UART )\n- MCU should drive OE pin down before switching from 3.3V to 5V and vise versa.\n- When OE pin is driven down, sleep for a bit before switching from 5V to 3.3V\n  to allow the capacitor to discharge.\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#current-measurement","title":"Current measurement","text":"<pre><code># INA226\n- Use for example: ERJ-B1CFR10U as a shunt resistor\n- Or CSR1206FTR100\n</code></pre>","tags":["electronics"]},{"location":"Projects/Electronics/phone-extension/#usb","title":"USB","text":"<pre><code># USB\n- To be compliant with the USB 2.0 full-speed electrical specification,\nthe USBDP (D+) pin should be pulled up with a 1.5 kOhm resistor to a 3.0-to-3.6 V\nvoltage range\n</code></pre>","tags":["electronics"]},{"location":"Projects/Graphics/custom-graphics-renderer/","title":"Custom Graphics Renderer","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#description","title":"Description","text":"<p>Here is some progress pictures from a graphics renderer project that I was working on a year ago while learning graphics programming. I was mainly focused on OpenGL, but the idea was to write a general graphics/game engine and add a Vulkan API support for it too.</p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#testing-mesh-repeater-settings","title":"Testing mesh repeater settings","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#testing-instancing-copying-all-vertex-data-to-gpu-and-drawing-only-once","title":"Testing instancing ( copying all vertex data to GPU and drawing only once )","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#mesh-pointer","title":"Mesh pointer","text":"<p>The grid can be navigated by moving around the pointer with keyboard. </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#modifying-individual-mesh-properties-in-a-mesh-grid","title":"Modifying individual mesh properties in a mesh grid","text":"<p>The idea here was that each mesh, or an object would have this 'repeater' setting built in, so that they could be copied to all directions, add padding, rotating and scaling them individually just changing the configs.  </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#multi-select","title":"Multi select","text":"<p>Meshes can be multi-selected in the 'repeater' grid, and adjusting the transformations all at once.  </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#materials","title":"Materials","text":"<p>Testing materials  </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#textures","title":"Textures","text":"<p>Testing texture loading. </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#models","title":"Models","text":"<p>Testing 3D model loading  </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#lighting","title":"Lighting","text":"<p>Implemented the Phong lighting model, which consists of different components; ambient, specular and diffuse lighting. These are all calculated in the fragment shader.</p> <p>Here are different types of lights:</p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#directional-lights-diffuse","title":"Directional lights ( diffuse )","text":"<p>Ambient light is also present, otherwise the unlit side of the boxes would be completely black and the texture would not show up. </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#specular-maps","title":"Specular maps","text":"<p>This adds the 'metal' effect to the texture </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#pointlight-fadeout","title":"Pointlight fadeout","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#spotlight","title":"Spotlight","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#multiple-different-lights","title":"Multiple different lights","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#multiple-point-lights","title":"Multiple point lights","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#physics","title":"Physics","text":"<p>Testing the 'Bullet' real-time physics simulation engine  </p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#terrain","title":"Terrain","text":"<p>Testing terrain generation with berlin noise</p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#somethings-not-right","title":"Something's not right","text":"","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#refactoring","title":"Refactoring","text":"<p>At this point the test code base structure was getting a bit out of hand and I decided to start designing a little bit how it would work better. I was thinking that the renderer would work as an 'engine' library, separately from the game or other use case. I also moved to a ECS ( Entity Component System ) based system, which optimizes the CPU cache for handling the data. I also started to think about how to abstract the graphics API so that Vulkan API could be added later on to the engine.</p>","tags":["graphics"]},{"location":"Projects/Graphics/custom-graphics-renderer/#some-terrain-and-cubes-from-the-new-engine-library-added-to-the-scene","title":"Some terrain and cubes from the new 'engine' library added to the scene","text":"","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/","title":"OpenGL experiments","text":"<p>I was doing this OpenGL course on Udemy a while ago and here is the progress so far.</p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#got-a-window-open","title":"Got a window open.","text":"<p>Had to setup first:</p> <ul> <li>Microsoft Visual Studio 2019</li> <li>GLEW ( OpenGL Extension Wrangler )</li> <li>GLFW ( OpenGL FrameWork )</li> <li>Code to init GLEW and GLFW</li> </ul> <p></p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#got-a-triangle-to-the-screen","title":"Got a triangle to the screen \ud83d\ude00","text":"","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#triangle-moving","title":"Triangle moving","text":"","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#interpolate","title":"Interpolate","text":"<p>Triangle got some color and a z axis. The GIF looks a bit weird on this one.</p> <p></p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#camera","title":"Camera","text":"<p>Camera, keyboard and mouse control added.</p> <p></p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#texture","title":"Texture","text":"<p>Texture loading done using stb_image.h loader. Also forgot to mention earlier that I'm using math library called glm.</p> <p></p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#lighting","title":"Lighting","text":"<p>Got some lights going on. - Directional lights - Ambient lighting - Diffuse lighting - Specular lighting - Point lights</p> <p></p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#spotlight-following-a-camera","title":"Spotlight following a camera.","text":"","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#model-importing","title":"Model importing","text":"<p>Random models from https://free3d.com </p> <p>Orgrimmar from World of Warcraft</p>","tags":["graphics"]},{"location":"Projects/Graphics/opengl-experiments/#links","title":"Links","text":"<ul> <li>https://www.udemy.com/course/graphics-with-modern-opengl/</li> <li>https://free3d.com</li> </ul>","tags":["graphics"]},{"location":"Projects/Graphics/vulkan-experiments/","title":"Vulkan experiments","text":"","tags":["graphics"]},{"location":"Projects/Graphics/vulkan-experiments/#description","title":"Description","text":"<p>I have been following this Udemy course on Vulkan API and managed to get something to the screen finally after about 11 hours worth of lessons. </p> <p>A triangle: </p> <p>It's a pretty low level graphics API, the triangle required around 1.2k lines of code + headers. </p> <p>Vulkan is very verbose and alot of code is required to set it up initially. Big portion of the code is just  filling structure types with a bunch of settings for the Vulkan. </p> <p>I also got into learning OpenGL a while back and for reference the amount of code required to draw a triangle to the screen was around 170 lines.</p> <p>This is still pretty interesting, will see how long can this hold my interest.</p>","tags":["graphics"]},{"location":"Projects/Graphics/vulkan-experiments/#links","title":"Links","text":"<ul> <li>https://www.udemy.com/course/learn-the-vulkan-api-with-cpp/</li> </ul>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/","title":"Exporting models from World of Warcraft","text":"<p>It's pretty easy to export models from WoW classic or retail version using this WoW Export -tool.  There is also another tool for this called Wow Model Viewer, but I haven't used it much.</p> <p> Building model imported to Blender</p>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#setup-wow-exporter","title":"Setup wow exporter","text":"<ol> <li>Go to https://wow.tools/export/</li> <li>Download the exporter tool</li> <li>Extract the zip file</li> <li>Open the folder and run wow.exporter.exe</li> <li>Slecet Local Installation. Select _classic_ or _retail_ from BattleNet installation folder</li> <li>Click Settings icon in the top right corner.</li> <li>Set your Export Directory and Apply</li> <li>Click the Blender icon in the top right corner.</li> <li>Click Install Automatically</li> <li>Click Go back</li> <li>Search for example trollhotel.wmo. The model has a preview next to it which supports zooming and moving the object.</li> <li>Select all the Doodads on the right</li> <li>Click Export as OBJ </li> </ol>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#import-model-to-blender","title":"Import model to Blender","text":"<ol> <li>File -&gt; Import -&gt; Wavefront (.obj)</li> <li>Browse to your model export directory</li> <li>Select for example the troll_hotel01.obj and ** Import OBJ**</li> <li>To view textures, click Viewport Shading button in the top right corner. ( Round icon ) </li> </ol>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#import-model-to-unity","title":"Import model to Unity","text":"<p>Textures need to be embedded to the model and I found that it is best done using blender 1. Create a new 3D Unity Project 2. Open Blender and click File -&gt; export -&gt; FBX (.fbx) 3. From Path Mode section on the right, select copy and select the box next to it  4. Navigate to Unity project folder/Assets. Create new folder, for example WoW, name the model file and click Export FBX 5. In Unity, from Project window, open Assets/wow/ 6. Select trollhotel model. 7. From the Inspector window on the right, Select Materials.     * Material Creation Mode : Standard     * sRGB Albedo Colors     : Selected     * Location               : Use Embedded Materials 8. Click Extract Textures.. 9. Select the Assets/wow/ folder. 10. Drag the trollhotel** model to the viewport 11. Model is now imported and textures should work. </p>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#import-model-to-godot-1","title":"Import model to Godot #1","text":"<ol> <li>Create a new Godot project</li> <li>From Blender, click File -&gt; Export -&gt; Collada(default)(.dae)</li> <li>Browse to Godot folder, create folder Assets, name the model to trollhotel.dae and click Export COLLADA</li> <li>Open Godot</li> <li>Create a Scene: Scene -&gt; 3D Scene</li> <li>Go to FileSystem and drag the trollhotel.dae to the viewport</li> </ol> <p>For me this method created a weird glossy effect for the whole object in Godot. Didn't really spend too much time trying to fix it. I found out that there is another way to import objects from Blender to Godot, see Import model to Godot #2. </p>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#import-model-to-godot-2","title":"Import model to Godot #2","text":"<ol> <li>Install Godot Blender Exporter: https://github.com/godotengine/godot-blender-exporter</li> <li>Copy the io_scene_godot -directory the location where Blender stores the scripts/addons folder on your system  (you should see other io_scene_* folders there from other addons). Copy the entire dir and not just its contents.</li> <li>Go to the Blender settings Edit -&gt; Preferences -&gt; Add-ons and enable the Godot Engine Exporter plugin.</li> <li>Export your file with File -&gt; Export -&gt; Godot Engine (.escn)</li> <li>Note that the exported files needs to be saved to Godot project folder</li> </ol> <p> Model compared to the Import model to Godot #1 method. Lighting seems to be turned way up in the godot engine exporter one, but the gloss effect is gone.</p>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#custom-opengl-renderer","title":"Custom OpenGL renderer","text":"<p>Got the model also working in my custom OpenGL renderer. All the doodads ( decorations and such ) are also loading properly. Transparent objects needs some work still as you can see they have a black background. See my OpenGL experiments post </p>","tags":["graphics"]},{"location":"Projects/Graphics/wow-model-export/#links","title":"Links","text":"<ul> <li>https://wow.tools/export/</li> <li>https://www.blender.org/</li> <li>https://unity.com/</li> <li>https://www.blender.org/</li> <li>https://wowmodelviewer.net/new/</li> <li>https://www.youtube.com/watch?v=ybcq2C93i2k</li> <li>https://github.com/godotengine/godot-blender-exporter</li> </ul>","tags":["graphics"]},{"location":"Projects/Linux/install-arch-linux/","title":"Arch Linux installation notes","text":"<p>This is a re-write of my old Arch Linux installation notes. Originally they were just on different text files on my github repo and they became too hard to read at some point so I decided to combine these notes to a proper blog post. The blog post was originally created to my old wordpress website a couple of years ago. Decided I would migrate this to here as well.</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#table-of-contents","title":"Table of contents:","text":"<ul> <li>1 VirtualBox setup</li> <li>2 Starting Arch Linux virtual machine</li> <li>3 Setting up network connection</li> <li>4 Setup disk partitions</li> <li>5 System setup</li> <li>6 Configure network</li> <li>7 Install sound</li> <li>8 Install display server</li> <li>9 Install desktop environment</li> <li>10 TLDR</li> </ul>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#requirements","title":"Requirements:","text":"<ul> <li>Time and patience.</li> <li>Virtual machine ( or why not a real machine )</li> <li>Arch Linux image</li> <li>1GB RAM</li> <li>8GB free hard disk space</li> </ul>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#steps","title":"Steps:","text":"<ol> <li>Install VirtualBox</li> <li>Install Arch Linux</li> <li>???</li> <li>Profit</li> </ol> <p>Easy, huh? So lets begin by installing the virtual machine so we can actually launch the Arch Linux!</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#download","title":"Download:","text":"<ul> <li>https://www.virtualbox.org/wiki/Downloads</li> <li>https://www.archlinux.org/download/</li> </ul>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#virtualbox-setup","title":"VirtualBox setup","text":"<ol> <li>Click New</li> <li>Select the 64-bit Arch Linux and select a machine folder</li> <li>Allocate RAM for the virtual machine. Recommended 1024MB should be enough.</li> <li>Create a virtual hard disk</li> <li>Select hard disk file type: VDI</li> <li>Set the storage as dynamically allocated so that it won\u2019t reserve the whole space immediately.</li> <li>Type the name for the Virtual disk and allocate the size.Recommended 8GB is just fine for messing around with virtual machine</li> </ol> <p>Now the virtual machine has been setup and the virtual machine is ready to be started.  Click Start, select 64-bit Arch Linux as a start-up disk and click Start. </p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#virtual-machine-setup-notes","title":"Virtual machine setup notes:","text":"<ul> <li>If you lose your mouse on VirtualBox, click right Ctrl</li> <li>You can scroll up/down the terminal window with Shift + PageUp/PageDown</li> <li>If you get stuck in scaled mode: click right Ctrl + C</li> <li>Exit full screen mode right Ctrl + F</li> </ul>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#now-on-to-the-sweet-arch-linux-installation-part","title":"Now on to the sweet Arch Linux installation part.","text":"","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#starting-arch-linux-virtual-machine","title":"Starting Arch Linux virtual machine","text":"<p>2.1 Click Boot Arch Linux ( x86_64 ). After Linux boots up, you should be sitting at root@archiso shell.</p> <p>2.2 ( Optional ) set the keyboardlayout temporarily to finnish. ( Or whatever your language is. Default is english )  <pre><code>loadkeys fi\n</code></pre> 2.3 Check the network connection by pinging a google server <pre><code>ping google.com\n</code></pre> 2.4 If your connection works, skip to step 4.</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#setting-up-network-connection","title":"Setting up network connection","text":"<p>3.1 Check the ethernet card status and the drivers it uses. Command lists information about PCI buses and devices. Scroll up and search for Ethernet controller portion. <pre><code>lspci -v\n</code></pre> 3.2 To search for Ethernet part, and print 10 lines after that: <pre><code>lspci -v | grep -A 10 \"Ethernet\"\n</code></pre></p> <p> Kernel driver in use: e1000 \u2013 This is your card\u2019s driver </p> <p>3.3 Now we can search for the driver in the kernel message buffer to see if it is up. <pre><code>dmesg | grep e1000\n</code></pre></p> <p>Output should look something like this, when the card is up and running: </p> <p>3.4 If the driver is not in use, we need to load the driver. replace [ e1000 ] with your driver shown in lspci. <pre><code>rmmod e1000\nmodprobe e1000\n</code></pre> Throw in another ping to google server to test the connection. I have successfully fixed my connection issues this way a few times whenever  I have started a fresh Arch install. </p> <p>Of course there are many possible reasons why the connection is not working, especially wireless connection,  but this is all that I have documented on my notes. If this doesn\u2019t help, some googling is required to go forward I\u2019m afraid.</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#setup-disk-partitions","title":"Setup disk partitions","text":"<p>4.1 Check the disk name: <pre><code>fdisk -l\n</code></pre></p> <p> /dev/sda is the one here</p> <p>4.2 Open the partitioning tool: <pre><code>cgdisk /dev/sda\n</code></pre></p> <p>4.3 Create a boot partition:</p> <p>Note! Consider allocating more memory than 5GB for the root file system</p> <pre><code>- Press New\n- Size -&gt; 512M\n- Code -&gt; EF00\n- Name -&gt; boot\n</code></pre> <p>4.4 Create a swap partition: <pre><code>- Press New\n- Size -&gt; 512M\n- Code -&gt; 8200\n- Name -&gt; swap\n</code></pre></p> <p>4.5 Create a root partition: <pre><code>- Press New\n- Size -&gt; 5G\n- Code -&gt; 8300\n- Name -&gt; root\n</code></pre></p> <p>4.6 Create a home partition: <pre><code>- Press New\n- Size -&gt; Enter ( Uses rest of the space. )\n- Code -&gt; 8300\n- Name -&gt; home\n</code></pre></p> <p>4.7 At this point the partitioning is done and just needs to be written to the disk: <pre><code>- Press Write -&gt; Yes.\n</code></pre></p> <p>4.8 Check that the partition table got written to the disk correctly: <pre><code>lsblk\n</code></pre></p> <p> Partition table should look something like this.</p> <p>4.9 Format the partitions</p> <p>Create boot: <pre><code>mkfs.fat -F32 /dev/sda1\n</code></pre></p> <p>Create swap: <pre><code>mkswap /dev/sda2\n</code></pre></p> <p>Turn swap on: <pre><code>swapon /dev/sda2\n</code></pre></p> <p>Create root partition: <pre><code>mkfs.ext4 /dev/sda3\n</code></pre></p> <p>Create home partition: <pre><code>mkfs.ext4 /dev/sda4\n</code></pre></p> <p>Create /mnt directory: <pre><code>mkdir /mnt\n</code></pre></p> <p>Mount root to /mnt: <pre><code>mount /dev/sda3 /mnt\n</code></pre></p> <p>Create boot directory: <pre><code>mkdir /mnt/boot\n</code></pre></p> <p>Create home directory: <pre><code>mkdir /mnt/home\n</code></pre></p> <p>Create home directory: <pre><code>mkdir /mnt/home\n</code></pre></p> <p>Mount sda1 to boot directory: <pre><code>mount /dev/sda1 /mnt/boot\n</code></pre></p> <p>Mount sda4 to home directory: <pre><code>mount /dev/sda4 /mnt/home\n</code></pre></p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#system-setup","title":"System setup","text":"<p>5.1 Install the system: <pre><code>pacstrap -i /mnt base base-devel\n</code></pre> Press enter to all of the questions ( to install all packages )</p> <p>5.2 Generate fstab file: <pre><code>genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab\n</code></pre> Fstab-file can be used to define what disks / partitions are going to be mounted to the filesystem.</p> <p>5.3 Check that the 4 newly created partitions exists in fstab-file: <pre><code>nano /mnt/etc/fstab\n</code></pre></p> <p> Fstab should look something like this.</p> <p>5.4 Chroot to /mnt. <pre><code>arch-chroot /mnt\n</code></pre></p> <p>5.5 Generate locale files: <pre><code>nano /etc/locale.gen\n</code></pre> Uncomment en_US-UTF-8:</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#protip-press-ctrl-w-and-search-for-en_us","title":"ProTip: Press Ctrl + W and search for \u201cen_US\u201d","text":"<p>5.6 Generate files: <pre><code>locale-gen\n</code></pre></p> <p>5.7 Setup language:</p> <p>Create locale.conf and put en_US.UTF as default language <pre><code>echo LANG=en_US.UTF-8 &gt; /etc/locale.conf\n</code></pre></p> <p>Export language: <pre><code>export LANG=en_US.UTF-8\n</code></pre></p> <p>5.8. Setup time</p> <p>Set the timezone: <pre><code>ln -s /usr/share/zoneinfo/Europe/Helsinki /etc/localtime\n</code></pre></p> <p>Setup hardware clock: <pre><code>hwclock --systohc --utc\n</code></pre></p> <p>5.9 Setup package manager: <pre><code>nano /etc/pacman.conf\n</code></pre> * Uncomment [multilib] and Include below it * Add to the end of the file: <pre><code>[archlinuxfr]\nSigLevel = Never\nServer = http://repo.archlinux.fr/$arch\n</code></pre></p> <p> Pacman.conf should look something like this.</p> <p>5.10 Update the system. <pre><code>pacman -Syu\n</code></pre></p> <p>5.11 Setup users and passwords.</p> <p>Set the hostname and password: <pre><code>echo [YOUR_HOSTNAME_HERE] &gt; /etc/hostname\npasswd [YOUR_HOSTNAME_HERE]\n</code></pre></p> <p>Add the new user to group \u2018wheel\u2019: <pre><code>useradd -m -g users -G wheel -s /bin/bash [YOUR_HOSTNAME_HERE]\n</code></pre></p> <p>Enable sudo for user: <pre><code>EDITOR=nano visudo\n</code></pre> Remove #-sign from #%wheel ALL=(ALL) ALL</p> <p> Visudo should look something like this.</p> <p>Setup root password: <pre><code>passwd\n</code></pre></p> <p>5.12 ( Optional ) Skip if you are not booting in EFI-mode. ( If you followed the VirtualBox tutorial, skip this part. )</p> <p>Check that EFI variables are mounted: <pre><code>mount -t efivarfs efivarfs /sys/firmware/efi/efivars\n</code></pre></p> <p>Install EFI to boot: <pre><code>bootctl --path=/boot install\n</code></pre></p> <p>5.13 Configure bootloader:</p> <p>Create a folder for conf file: <pre><code>mkdir -p /boot/loader/entries/\n</code></pre> [ -p ] -tag creates folders recursively</p> <p>Open and create a conf file: <pre><code>nano /boot/loader/entries/arch.conf\n</code></pre> * Type to the file:</p> <pre><code>title Arch Linux\nlinux /vmlinuz-linux\ninitrd /intel-ucode.img      # ( if PC has an Intel CPU )\ninitrd /initramfs-linux.img\noptions root=/dev/sda3 rw\n</code></pre> <p> Bootloader configuration file should look something like this.</p> <p>5.14 Setup bootloader.</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#optional-install-intel-microcodes-if-you-have-intel-cpu","title":"( Optional ) Install intel microcodes if you have Intel CPU:","text":"<pre><code>pacman -S intel-ucode\n</code></pre> <p>Install bootloader: <pre><code>pacman -S grub-bios\n</code></pre></p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#optional-if-bootloader-installing-fails-and-you-have-booted-in-efi-mode","title":"( Optional ) If bootloader installing fails and you have booted in EFI mode:","text":"<pre><code>pacman -Sy efibootmgr\ngrub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck\n</code></pre> <p>Install bootloader to harddrive: <pre><code>grub-install /dev/sda\n</code></pre></p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#note","title":"Note!","text":"<p>Here I actually got my first error: <pre><code>grub-install: warning: this GPT partition label contains no BIOS Boot Partition; embedding won\u2019t be possible.\nGrub-install: warning: Embedding is not possible. GRUB can only be installed in this setup by using blocklists. However, blockists are UNRELIABLE and their use is discouraged..\ngrub-install: error: will not proceed with blocklists.\n</code></pre> I solved it by adding --force to the command so that it will use the blocklists. Kind of an ugly way to solve a problem and I might come back to the article and update a proper way to fix this. <pre><code>grub-install --force --target=i386-pc /dev/sda\n</code></pre></p> <p>Create a init ramdisk file for temporary root file system during startup: <pre><code>mkinitcpio -p linux\n</code></pre></p> <p>Create a grub config-file: <pre><code>grub-mkconfig -o /boot/grub/grub.cfg\n</code></pre></p> <p>Exit chroot: <pre><code>exit\n</code></pre></p> <p>Unmount the drive: <pre><code>umount /mnt/boot\numount /mnt/home\numount /mnt\n</code></pre></p> <p>Reboot the system: <pre><code>reboot\n</code></pre></p> <p>5.15 Boot up the system</p> <p>Open the bootloader from the menu: <pre><code>- Choose 'Boot existing OS' from the menu\n- Select Arch Linux\n</code></pre></p> <p> Arch Linux boot menu</p> <p> GRUB bootloader</p> <p> You should be sitting at login prompt.</p> <p> Login with the username and password that you configured earlier. And once you log in, you can see that there is not much going on, just a black terminal window. Now we just need to install a GUI. </p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#congratulations-you-have-just-installed-arch-linux","title":"Congratulations! You have just installed Arch Linux!","text":"<p>At this point some more steps are going to be needed so that the Arch Linux build would be useful for anything, like installing sound and graphical user interface.</p> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#configure-network","title":"Configure network","text":"<p>Network needs to actually be re-configured, because the network setup during install has no effect on the actual system.</p> <p></p> <p>Once again, check the name of the network driver: <pre><code>lspci -v\n</code></pre></p> <p></p> <p>Check the network interface name from the dmesg output: <pre><code>dmesg | grep e1000\n</code></pre></p> <p></p> <p>So my interface name is enp0s3. Now it needs to be configured to the DHCP client <pre><code>sudo dhcpcd enp0s3\n</code></pre></p> <p></p> <p>To make the fix permanent, we need to enable the dhcpcd service, so that we have a network connection at startup. <pre><code>systemctl enable dhcpcd.service\n</code></pre></p> <p>Now the network should be back up, try to ping google servers once again: <pre><code>ping google.com\n</code></pre></p> <p></p> <p>Install net-tools to get ifconfig working: <pre><code>sudo pacman -S net-tools\n</code></pre></p> <p>Run ifconfig to see network information: <pre><code>ifconfig\n</code></pre></p> <p></p> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#install-sound","title":"Install sound","text":"<p>Install sound card drivers ( ALSA ): <pre><code>sudo pacman -S alsa-utils\n</code></pre></p> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#install-display-server","title":"Install display server","text":"<ul> <li>Choose 1: libglvnd ( These containt the latest drivers from the official repo. )</li> <li>Press Y <pre><code>pacman -S xorg-server xorg-xinit xorg-server-utils\n</code></pre></li> </ul> <p>Install 3D acceleration: <pre><code>pacman -S mesa\n</code></pre></p> <p>Choose the correct driver:</p> Manuf Driver If 64bit AMD/ATI xf86-video-ati lib32-ati-dri Intel xf86-video-intel lib32-intel-dri Nvidia xf86-video-nouveau lib32-nouveau-dri <p>Install graphics card drivers: <pre><code>sudo pacman -S xf86-video-intel\nsudo pacman -S lib32-intel-dri\n</code></pre></p> <p>Install touchpad drivers, if you have a laptop: <pre><code>pacman -S xf86-input-synaptics\n</code></pre></p> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#install-desktop-environment","title":"Install desktop environment","text":"<p>Choose one from the wiki:</p> <p>https://wiki.archlinux.org/index.php/desktop_environment.</p> <p>I usually go with the Xfce4.</p> <p>Click enter to all prompts ( defaults ) <pre><code>pacman -S xfce4 xfce4-goodies\n</code></pre></p> <p>Configure desktop environment: <pre><code>cp /etc/X11/xinit/xinitrc ~/.xinitrc\n</code></pre> <pre><code>sudo nano ~/.xinitrc\n</code></pre></p> <p>To load your keyboard layout add before exec line: ( change the fi to your language ) <pre><code>setxkbmap -layout fi\n</code></pre></p> <p>Add line to the end of the file: ( Replace startxfce4 with your DE. for example startlxde ) <pre><code>exec startxfce4\n</code></pre></p> <p>Edit bash profile file: <pre><code>sudo nano ~/.bash_profile\n</code></pre></p> <p>Add line to the end of the file: <pre><code>[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; exec startx\n</code></pre></p> <p>Now the Desktop Environment has been set up. You can run the DE by running: <pre><code>startxfce4\n</code></pre></p> <p>Keyboard layout hasn\u2019t been loaded yet, the system needs to be rebooted once for the keyboard layout to take effect. <pre><code>sudo reboot\n</code></pre></p> <p>Install fonts: <pre><code>pacman -S ttf-dejavu\n</code></pre></p> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#once-again-congrats","title":"Once again, Congrats!","text":"<p>You should now have a working Arch Linux installation with GUI and everything. I might do some follow up articles for the Arch Linux installation, for example customizing Xmonad Desktop Environment.</p> <p></p> <p>Now that I have everything setup, the root partition is taking 63% of the allocated 5GB size. You really might want to allocate a lot more for the partitions.</p> <p></p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#notes","title":"Notes:","text":"<pre><code>If you get stuck on login screen ( X server crashing ):\nPress Ctrl + ALT + F2 so you can go to reconfigure ~/.xinitrc for example # (F1 - F7) F1 has the X server running.\n</code></pre> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Linux/install-arch-linux/#tldr","title":"TLDR","text":"<p>These are my raw notes, terminology might not be 100% correct, might contain more typos etc. <pre><code>1. loadkeys fi\n\n2. ping google.com\n\n\n    if network is not working try:\n\n    - lspci -v: search for ethernet driver name for example 'tg3'\n\n    -dmesg | grep tg3:\n\n        if driver is down run:\n\n            - rmmod tg3\n\n            - modprobe tg3\n\n3. fdisk -l # check the harddrive name for the next command\n\n4. gdisk /dev/sda # *possibly not needed*\n\n\n\n---------------- THIS IS FOR SSD DRIVES -------------------\n\n----- Use alternative (cfdisk) below if you have HDD ------\n\n\n\n5. cgdisk \n\n    - new 1gb boot section (EF00) # 1024MiB\n\n    - new (half of ram) sized swap (8200) # 2048MiB\n\n    - new 20gb root (8300) # 20000MiB\n\n    - new rest of the space sized home (8300) # the rest of the space\n\n\n\ntype lsblk to check partition names\n\n\n\n6. mkfs.fat -F32 /dev/sda1 # create boot\n\n7. mkswap /dev/sda2 # create swap\n\n8. swapon /dev/sda2 # turn swap on\n\n9. mkfs.ext4 /dev/sda3 # create root partition\n\n10. mkfs.ext4 /dev/sda4 # create home partition\n\n11. mkdir /mnt # create /mnt directory\n\n12. mount /dev/sda3 /mnt # mount root to /mnt\n\n13. mkdir /mnt/boot \n\n14. mkdir /mnt/home\n\n15. mount /dev/sda1 /mnt/boot\n\n16. mount /dev/sda4 /mnt/home\n\n\n(5. alternaitve) cfdisk /dev/sda\n\n    - delete all existing partitions\n\n    - create new partition sized half of your ram size\n\n        - set type to primari and linux swap\n\n    - create new partition with the remaining disk space\n\n        - set type to primary and linux bootable\n\n    - hit write\n\n\n\n        - mkfs.ext4 /dev/sda2 # format to ext4\n\n        - mount /dev/sda2 /mnt # mount root\n\n        - mkswap /dev/sda1 # make swap partition\n\n        - swapon /dev/sda1 # init swap partition\n\n\n17. cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup # create a backup of the mirrorlist\n\n18. sed -i 's/^#Server/Server/' /etc/pacman.d/mirrorlist.backup # uncomments all the servers in the mirrorlist.backup\n\n19. rankmirrors -n 6 /etc/pacman.d/mirrorlist.backup &gt; /etc/pacman.d/mirrorlist # ping through the mirrors\n\n#in mirrorlist.backup and stdout them into real mirrorlist (this will take about 5-10minutes)\n\n20. pacstrap -i /mnt base base-devel # install arch linux base and base-devel packages (install all)\n\n21. genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab # generate fstab file\n\n22. nano /mnt/etc/fstab # cheack that the 4 partitions exists in here. Or 2 if you used the alternative partitioning example.\n\n23. arch-chroot /mnt # chroot into /mnt\n\n24. nano /etc/locale.gen # uncomment en_US-UTF8\n\n25. locale-gen # generate locale files\n\n26. echo LANG=en_US.UTF-8 &gt; /etc/locale.conf # create locale.conf and put en_US.UTF as default language\n\n27. export LANG=en_US.UTF-8\n\n28. nano /etc/vconsole.conf\n\n# write in the file:\n\n    #KEYMAP=fi\n\n    #FONT=Lat2-Terminus16\n\n29. ls /usr/share/zoneinfo/Europe/ # check that Helsinki is in the folder\n\n30. ln -s /usr/share/zoneinfo/Europe/Helsinki /etc/localtime # set timezone\n\n31. hwclock --systohc --utc\n\n32. echo &lt;hostname&gt; &gt; /etc/hostname\n\n33. nano /etc/pacman.conf\n\n# uncomment [multilib] and Include below it\n\n# add to the end of the file:\n\n    [archlinuxfr]\n\n    SigLevel = Never\n\n    Server = http://repo.archlinux.fr/$arch\n\n34. pacman -Syu # update system\n\n35. pacman -S yaourt # install user repository package\n\n36. passwd # setup new root password\n\n37. useradd -m -g users -G wheel -s /bin/bash &lt;username&gt; # add new user to group 'wheel'\n\n38. EDITOR=nano visudo # enable sudo for user. Remove #-sign from #%wheel ALL=(ALL) ALL \n\n39. passwd &lt;user&gt; # change newly created user password\n\n40. pacman -S bash-completion # helps complete package names in the shell\n\n\n\n----------------------------------------------------\n\n----- SKIP IF YOU ARE NOT INSTALLING FROM EFI ------\n\n----------------------------------------------------\n\n\n\n41. mount -t efivarfs efivarfs /sys/firmware/efi/efivars # check that EFI variables are mounted\n\n42. bootctl --path=/boot install # install EFI to boot\n\n----------------------------------------------------\n\n----------------------------------------------------\n\n----------------------------------------------------\n\n\n\n43. nano /boot/loader/entries/arch.conf\n\n# type to the file:\n\n    title Arch Linux\n\n    linux /vmlinuz-linux\n\n    initrd /intel-ucode.img # if pc has intel cpu\n\n    initrd /initramfs-linux.img\n\n    options root=/dev/sda3 rw\n\n44. pacman -S intel-ucode # if pc has intel cpu\u007f\n\n45. pacman -S grub-bios # download bootloader\n\n    if this doesnt work try:\n\n        pacman -Sy efibootmgr\n\n        grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=grub --recheck\n\n46. grub-install /dev/sda # install bootloader to harddrive\n\n47. mkinitcpio -p linux # create init file for root\n\n48. exit\n\n49. grub-mkconfig -o /boot/grub/grub.cfg # create grub config file\n\n50. umount /mnt # unmount the drive\n\n51. reboot\n</code></pre></p> <p>&amp;nbsp</p>","tags":["linux"]},{"location":"Projects/Misc/all-the-mods/","title":"Allthemods","text":"<p>I had already forgotten about this old modding site I used to post some little things I made long ago:  http://allthemods.com/userinfo.php?userid=2328. Most of the images seem to be dated around year 2008, so I was about 16 years old back then.</p> <p>No one seems to have been posting anything for a year in there so I wouldn't be surprised if the site went offline one of these days, I hope not though.</p> <p>It used to be cool to see people create cool computer cases and so on. Nowadays many computer cases, mouses and keyboards  are pretty cool already out of the box so no modding really needed. Well some people seem to be really into building custom keyboards now, which is cool. But ofcourse modding everything possible is still interesting, at least to me.</p> <p>So anyway, I thought I would download my pictures from there and save them here. I will also add the original image descriptions as header text, wrapped around quotes above the image.</p>","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#rear-light-in-action-at-night","title":"\"rear light in action at night.\"","text":"<p>I actually still have this bike and a few years ago I changed the battery to test it and it still works! Though I had changed the LED to ultra bright red pretty quickly after I made the light.  </p>","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#my-bicycle-rear-light-with-alpinestars-logo-flashes-different-colors","title":"\"my bicycle rear light with alpinestars logo, flashes different colors.\"","text":"","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#glowpad-with-red-lightswitch","title":"\"glowpad with red lightswitch\"","text":"","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#not-a-daylight-pic-but-took-it-with-flash-and-that-allsop-is-just-temporarily-there","title":"\"not a daylight pic, but took it with flash and that allsop is just temporarily there.\"","text":"","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#top-item-in-mousemousepad-category","title":"Top item in mouse/mousepad category","text":"<p>Found this picture from my cloud service where I had backed up stuff from around this time. </p>","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#oooold-moped","title":"\"oooold moped :|\"","text":"<p>My old moped. Derbi senda R -97 </p>","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#derbi","title":"\"DERBI !!\"","text":"","tags":["misc"]},{"location":"Projects/Misc/all-the-mods/#found-it-in-my-closet-i-made-it-years-ago-in-school-i-still-dont-know-what-is-it","title":"\"Found it in my closet, I made it years ago in school. I still don't know what is it.\"","text":"<p>That's all I posted in there unfortunately \ud83d\ude00</p> <p>I actually used to do a lot more of these kind of mousepads with different engravings and I sold them in school and to friends.  Didn't take pictures of them or I have lost them though. I Also did some mouse, keyboard and computer case mods and so on. If I find some more pictures I might add them here later.</p> <p>Links: * http://allthemods.com/userinfo.php?userid=2328</p>","tags":["misc"]},{"location":"Projects/Misc/home-assistant/","title":"Home Assistant","text":"","tags":["misc"]},{"location":"Projects/Misc/home-assistant/#what-is-this","title":"What is this?","text":"<p>Some pictures of my old Home Assistant setup that I spent some time to setup. I have moved since and only setup a few sensor to my new home for a brief testing of the ventilation of this place.</p> <p>However I'm planning on moving the Home Assistant setup to my garage, it will be more useful there. Also it has a simple Wireguard setup so I can connect to the garage LAN and monitor/control things remotely.</p>","tags":["misc"]},{"location":"Projects/Misc/home-assistant/#notes","title":"Notes","text":"<p>https://protoni.github.io/notes/Notes/home-assistant/</p>","tags":["misc"]},{"location":"Projects/Misc/home-assistant/#setup","title":"Setup","text":"<p>I have a Raspberry pi 3 running the home assistant distro. Raspberry pi has ConBee2 ( Zigbee ) USB gateway connected. So the current home assistant setup detects devices from WLAN, LAN and Zigbee.</p> <p>It has, or at least had these devices connected: - Power outlets to control - Lamps and christmas lights - Temperature/Humidity sensors - Water leak sensor - Movement detector - LG TV - Roomba - Control panel tablet - Desktop PC</p> <p>I had also setup wake on lan so I could use Wireguard VPN to connect to the home network and power on my PC from the home assistant control panel.</p>","tags":["misc"]},{"location":"Projects/Misc/home-assistant/#pictures","title":"Pictures","text":"<p>Current state. Here most of the sensors are turned off since I moved recently. </p> <p>Older picture with more devices online </p> <p>Temperature sensor graphs </p> <p>I setup this old Android tablet as a control panel </p> <p>Setting up home assistant and testing some weather cards </p> <p>Testing some christmas light automations </p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/","title":"Random old projects","text":"<p>I was browsing my cloud storage and found some old stuff from years 2014-2015, around when I started to learn programming. They are scattered all over the place inside countless of sub folders and tar archives so I thought it would be nice to organize some of them for easier access.</p> <p>I'm going to add here only some of the projects I found because most of them are not really too interesting visually and also it would take a lot of time to set the environments up for these to build and run. So basically only some python and web stuff will be found here. Maybe I'll add all them to GitHub for example in the future.</p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#python-games","title":"Python games","text":"<p>After some work I got these python 'games' to run. These are basically the first things I did when I  first started to learn programming.  I did some CodeCademy course first to get started with the syntax and then moved to doing something on my own. They use pygame to draw the graphics.</p> <p>I put these in order based on when I made them, oldest is first one in the list.</p> <ul> <li>Ball thing</li> <li>Block thing</li> <li>Block game</li> <li>Shooter game</li> <li>RPG</li> </ul>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#ball-thing","title":"Ball thing","text":"<p>Not really a game but first test on how to draw things to the screen. Seems to have at least collision detection in the borders. </p> <p>The code seems to be a weird mixture of finnish and english. <pre><code>import pygame, sys\nfrom random import randint\npygame.init()\nscreen = pygame.display.set_mode((1028, 480))\n\nclass Pallo(object):\n    def __init__(self, pos):\n        self.color = self.color()\n        self.pos = pos\n        self.radius = self.radius()\n        self.thickness = 0\n        self.paikka = self.paikka()\n        self.x = 0\n        self.y = 5\n\n    def color(self):\n        color = []\n        for x in range(3):\n            x = randint(0, 255)\n            color.append(x)\n        return color[:]\n\n    def paikka(self):\n        paikka = []\n        paikka.append(self.pos[0])\n        paikka.append(self.pos[1])  \n        return paikka[:]\n\n    def radius(self):\n\n        return randint(10, 100)\n\n    def update(self):\n        self.collision()\n        self.paikka[0] += self.x\n        self.paikka[1] += self.y\n\n\n    def collision(self):\n        '''wall collision'''\n        if self.paikka[0] &lt; 0 + self.radius:\n            self.x = 5\n        elif self.paikka[0] &gt; 1028 - self.radius:\n            self.x = -5\n        elif self.paikka[1] &lt; 0 + self.radius:\n            self.y = 5\n        elif self.paikka[1] &gt; 480 - self.radius:\n            self.y = -5\n\npallot = []\npallo_coords = []\n\nwhile True:\n    clock = pygame.time.Clock()\n    clock.tick(30)\n    pos = pygame.mouse.get_pos()\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            sys.exit()\n        if event.type == pygame.MOUSEBUTTONDOWN:\n            pallo = Pallo(pos)\n            pallot.append(pallo)\n\n\n    screen.fill((255, 255, 255))\n    for i in pallot:\n        pygame.draw.circle(screen, i.color, i.paikka, i.radius, i.thickness)\n        i.update()\n\n    pygame.display.flip()\n</code></pre></p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#block-thing","title":"Block thing","text":"<p>This is basically the same as ball thing, but has collision detection between objects flying around and the color changes on collision. </p> <p>Ze code <pre><code>import pygame, sys\nfrom random import randint\npygame.init()\nscreen = pygame.display.set_mode((1028, 480))\n\n\nclass Palikka(pygame.sprite.Sprite):\n    def __init__(self, color, size, pos):\n        pygame.sprite.Sprite.__init__(self)\n        self.width, self.height = size\n\n        # create rectangle\n        self.image = pygame.Surface((self.width, self.height))\n        self.image.fill((color))\n        self.rect = self.image.get_rect()\n\n        # starting point for the block. created with mouse click.\n        self.rect.x = pos[0] - self.width / 2\n        self.rect.y = pos[1] - self.height / 2\n\n        # change the speed of the block (30fps x pixels)\n        self.speed = 5\n\n        # speed vectors\n        self.x = 0\n        self.y = self.speed\n\n\n    def update(self):\n        # create copy for block collision detection\n        last = self.rect.copy()\n\n        # move block\n        self.rect.x += self.x\n        self.rect.y += self.y\n\n        # check to see that the block can change color after being hit\n        self.block_hit = False\n\n        # wall collision\n        if self.rect.x &lt; 0:\n            self.x = self.speed\n            self.block_hit = True\n        elif self.rect.x &gt; 1028 - self.width:\n            self.x = -self.speed\n            self.block_hit = True\n        elif self.rect.y &lt; 0:\n            self.y = self.speed\n            self.block_hit = True\n        elif self.rect.y &gt; 480 - self.height:\n            self.y = -self.speed\n            self.block_hit = True\n\n\n        # block collision\n        global palikat\n        new = self.rect\n        block_hit_list = pygame.sprite.spritecollide(self, palikat, False)\n        for cell in block_hit_list:\n            cell = cell.rect\n            if last.right &lt;= cell.left and new.right &gt; cell.left:\n                new.right = cell.left\n                self.x = -self.speed\n                self.block_hit = True\n            if last.left &gt;= cell.right and new.left &lt; cell.right:\n                new.left = cell.right\n                self.x = self.speed\n                self.block_hit = True\n            if last.bottom &lt;= cell.top and new.bottom &gt; cell.top:\n                new.bottom = cell.top\n                self.y = -self.speed\n                self.block_hit = True\n            if last.top &gt;= cell.bottom and new.top &lt; cell.bottom:\n                new.top = cell.bottom\n                self.y = self.speed \n                self.block_hit = True\n\n            # change the color of the block \n            if self.block_hit == True:\n                self.image.fill(color())\n\n\n# get random color\ndef color():\n    color = []\n    for x in range(3):\n        x = randint(0, 255)\n        color.append(x)\n    return color[:]\n\n# get random size\ndef get_size():\n\n    return randint(10, 50), randint(10, 50)\n\n\n\npalikat = pygame.sprite.Group()\n\n# main loop\nwhile True:\n    clock = pygame.time.Clock()\n    clock.tick(30)\n    screen.fill((255, 255, 255))\n    pos = pygame.mouse.get_pos()\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            sys.exit()\n        if event.type == pygame.MOUSEBUTTONDOWN:\n            palikka = Palikka(color(), get_size(), pos)\n            palikat.add(palikka)\n\n\n    palikat.update()\n    palikat.draw(screen)\n    pygame.display.flip()\n</code></pre></p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#block-game","title":"Block game","text":"<p>Getting some sort of game elements in </p> <pre><code>import pygame, sys\nfrom random import randint\nimport math\npygame.init()\nscreen = pygame.display.set_mode((1028, 480))\n\n\nclass Walls(pygame.sprite.Sprite):\n    def __init__(self, pos):\n        pygame.sprite.Sprite.__init__(self)\n        self.width = 15\n        self.height = 15\n        self.image = pygame.Surface((self.width, self.height))\n        self.image.fill((0, 200, 0))\n        self.rect = self.image.get_rect()\n        self.rect.x = pos\n        self.rect.y = 480 - self.height\n\n# make walls for the game\nwall_list = pygame.sprite.Group()\ndef make_walls():\n    for i in range (0, 1028, 15):\n        wall = Walls(i)\n        wall_list.add(wall)\nmake_walls()\n\nclass Player(pygame.sprite.Sprite):\n    def __init__(self):\n        pygame.sprite.Sprite.__init__(self)\n        self.width = 15\n        self.height = 15\n        self.image = pygame.Surface((self.width, self.height))\n        self.image.fill((0, 0, 0))\n        self.rect = self.image.get_rect()\n\n        # starting point for the player.\n        self.rect.x = 500\n        self.rect.y = 200\n\n        #gravity\n        self.resting = False\n        self.dy = 0\n        #speed\n        self.speed = 5\n\n    def update(self, dt, wall_list, palikat):\n        key = pygame.key.get_pressed()\n        last = self.rect.copy()\n        if key[pygame.K_a]:\n            self.rect.x -= 300 * dt\n        if key[pygame.K_d]:\n            self.rect.x += 300 * dt\n        if self.resting and key[pygame.K_SPACE]:\n            self.dy = -500\n\n        self.dy = min(400, self.dy + 40)\n        self.rect.y += self.dy * dt\n\n\n        # check collision with walls\n        new = self.rect\n        self.resting = False\n        block_hit_list = pygame.sprite.spritecollide(self, wall_list, False)\n        for cell in block_hit_list:\n            cell = cell.rect\n            if last.right &lt;= cell.left and new.right &gt; cell.left:\n                new.right = cell.left\n\n            if last.left &gt;= cell.right and new.left &lt; cell.right:\n                new.left = cell.right\n\n            if last.bottom &lt;= cell.top and new.bottom &gt; cell.top:\n                self.resting = True\n                new.bottom = cell.top\n                self.dy = 0\n\n            if last.top &gt;= cell.bottom and new.top &lt; cell.bottom:\n                new.top = cell.bottom\n                self.dy = 0\n\n        # check collision with blocks   \n        block_hit_list = pygame.sprite.spritecollide(self, palikat, False)\n        for cell in block_hit_list:\n            cell = cell.rect\n            if last.right &lt;= cell.left and new.right &gt; cell.left:\n                new.right = cell.left\n\n            if last.left &gt;= cell.right and new.left &lt; cell.right:\n                new.left = cell.right\n\n            if last.bottom &lt;= cell.top and new.bottom &gt; cell.top:\n                self.resting = True\n                new.bottom = cell.top\n                self.dy = 0\n\n            if last.top &gt;= cell.bottom and new.top &lt; cell.bottom:\n                new.top = cell.bottom\n                self.dy = 0\n\nclass Palikka(pygame.sprite.Sprite):\n    def __init__(self, pos):\n        pygame.sprite.Sprite.__init__(self)\n        self.width, self.height = 15, 15\n\n        # create rectangle\n        self.image = pygame.Surface((self.width, self.height))\n        self.image.fill((0, 200, 0))\n        self.rect = self.image.get_rect()\n\n        # starting point for the block. created with mouse click.\n        self.rect.x = pos[0] - self.width / 2\n        self.rect.y = pos[1] - self.height / 2\n\n        # change the speed of the block (30fps x pixels)\n        self.speed = 5\n\n        # speed vectors\n        self.x = 0\n        self.y = self.speed\n\n\n    def update(self, wall_list, bullet_list):\n        # create copy for block collision detection\n        last = self.rect.copy()\n\n        # move block\n        self.rect.x += self.x\n        self.rect.y += self.y\n\n        new1 = self.rect\n        # wall collision\n        global palikat\n        block_hit_list = pygame.sprite.spritecollide(self, palikat, False)\n        for cell in block_hit_list:\n            cell = cell.rect\n            if last.right &lt;= cell.left and new1.right &gt; cell.left:\n                new1.right = cell.left\n\n            if last.left &gt;= cell.right and new1.left &lt; cell.right:\n                new1.left = cell.right\n\n            if last.bottom &lt;= cell.top and new1.bottom &gt; cell.top:\n                new1.bottom = cell.top\n\n            if last.top &gt;= cell.bottom and new1.top &lt; cell.bottom:\n                new1.top = cell.bottom\n\n        # block collision\n\n        new = self.rect\n        block_hit_list = pygame.sprite.spritecollide(self, wall_list, False)\n        for cell in block_hit_list:\n            cell = cell.rect\n            if last.right &lt;= cell.left and new.right &gt; cell.left:\n                new.right = cell.left\n\n            if last.left &gt;= cell.right and new.left &lt; cell.right:\n                new.left = cell.right\n\n            if last.bottom &lt;= cell.top and new.bottom &gt; cell.top:\n                new.bottom = cell.top\n\n            if last.top &gt;= cell.bottom and new.top &lt; cell.bottom:\n                new.top = cell.bottom\n\n            new1 = self.rect\n        # wall collision\n\n        pygame.sprite.spritecollide(self, bullet_list, True)\n\nclass Bullet(pygame.sprite.Sprite):\n    def __init__(self, pos, player):\n        pygame.sprite.Sprite.__init__(self)\n        self.width = 10\n        self.height = 10\n        self.image = pygame.Surface((self.width, self.height))\n        self.image.fill((255, 0, 0))\n        self.rect = self.image.get_rect()\n        self.pos = pos\n        self.rect.x = player[0] - Player().width / 2\n        self.rect.y = player[1]\n        self.move_x = 0\n        self.move_y = 0\n\n        self.mouse_x, self.mouse_y = pos[0], pos[1]\n        self.player = player\n\n    def update(self, palikat):\n        speed = 20.\n\n        distance = [self.mouse_x - self.player[0], self.mouse_y - self.player[1]]\n        norm = math.sqrt(distance[0] ** 2 + distance[1] ** 2)\n        direction = [distance[0] / norm, distance[1 ] / norm]\n        bullet_vector = [direction[0] * speed, direction[1] * speed]\n        self.rect.x += bullet_vector[0]\n        self.rect.y += bullet_vector[1]\n\n        if self.rect.x &lt; 0:\n            pygame.sprite.Group.remove(bullet_list, self)\n        if self.rect.x &gt; 1028:\n            pygame.sprite.Group.remove(bullet_list, self)\n        if self.rect.y &lt; 0:\n            pygame.sprite.Group.remove(bullet_list, self)\n        if self.rect.y &gt; 480:\n            pygame.sprite.Group.remove(bullet_list, self)\n\n        # remove bullet when it hits a block\n        pygame.sprite.spritecollide(self, palikat, True)\n\n\nbullet_list = pygame.sprite.Group() \n\npalikat = pygame.sprite.Group()\n\nplayer_list = pygame.sprite.Group()\nplayer_in_game = False\n\nbullet_counter = 0\n# main loop\nwhile True:\n    clock = pygame.time.Clock() \n    dt = clock.tick(30)\n    screen.fill((255, 255, 255))\n    pos = pygame.mouse.get_pos()\n    mouse = pygame.mouse.get_pressed()\n    key = pygame.key.get_pressed()\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            sys.exit()\n\n    if key[pygame.K_LCTRL]:\n        if player_in_game == False:\n            player = Player()\n            player_list.add(player)\n            player_in_game = True\n\n    if mouse[2]:\n        palikka = Palikka(pos)\n        palikat.add(palikka)\n\n    if bullet_counter &gt; 20:\n        if mouse[0]:\n            bullet = Bullet(pos, [player.rect.x, player.rect.y])\n            bullet_list.add(bullet)\n            bullet_counter = 0\n\n\n    wall_list.draw(screen)\n\n    #limit the bullet count\n    bullet_counter += 10\n\n    bullet_list.update(palikat)\n    bullet_list.draw(screen)\n\n    player_list.update(dt / 1000., wall_list, palikat)\n    player_list.draw(screen)\n\n    palikat.update(wall_list, bullet_list)\n    palikat.draw(screen)\n    pygame.display.flip()\n</code></pre>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#shooter-game","title":"Shooter game","text":"<p>Out of all these pygame programs this is the only one that really can be counted as a game because it has some sort of game mechanics. The game even has a hiscore saving/loading system and difficulty levels! The idea is to kill as many monsters as possible, the rate they spawn in increases as the game goes on. </p> <p>The code begins to be pretty spaghetti at this point. Also theres 700+ code lines so I added this to github for easier reading. - https://github.com/protoni/legacy-stuff/blob/master/python_games/shooter/rpg.py</p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#rpg","title":"RPG","text":"<p>I managed to get this to work after some setting up. Had to setup python 2.7 environment and install python 2.7 modules alongside my python v3.8 setup.</p> <p>I still remember that I had difficulties getting the world and camera coordinate system to work in this one. Also the character animation was difficult for me to implement.</p> <p>Unfortunately the game never got finished.</p> <p>At this point I had already started to split the project into smaller files as the project grew: - https://github.com/protoni/legacy-stuff/tree/master/python_games/RPG</p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#web-stuff","title":"Web stuff","text":"<ul> <li>Raspberry Pi system monitor</li> <li>Music controller</li> </ul>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#raspberry-pi-system-monitor","title":"Raspberry Pi system monitor","text":"<p>I had no idea about modern web development techniques so I was building website with pure HTML, CSS and some PHP.</p> <p>I really liked messing around with raspberry pi's back then and I wanted to monitor them more easily as they were running 24/7 and was publicly accessible.</p> <p>With this monitor I could see the system status more easily. The site would parse system resources, fail2ban logs, ssh logs, open ports and such. If I remember correctly there was more tabs with more features on later versions, but I guess I didn't save those.</p> <p>This is the version 1.1. There is another earlier version 1.0 as well, but I don't have any pictures of that and I don't have any system to run it properly at this time.</p> <p>Some earlier version: </p> <p>Monitor page: </p> <p></p> <p>Repository: https://github.com/protoni/legacy-stuff/tree/master/www/monitor1.1</p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#music-controller","title":"Music controller","text":"<p>This is a simple PHP web page that would control music player through a FIFO system on linux. I don't really  remember much about this or how it worked, but the FIFO system seems interesting.</p> <p>I don't have a preview image or really anything to show other than the code.</p> <p>omx.php <pre><code>&lt;?php\n    if(isset($_POST['play']))\n    {\n        if(!file_exists('/tmp/omx')) exec('mkfifo /tmp/omx');\n        exec('php run.php &gt; /dev/null &amp;');\n        exec(\"echo . &gt; /tmp/omx\");\n    }\n\n    if(isset($_POST['pause']))\n    {\n        shell_exec('echo -n p &gt; /tmp/omx');\n    }\n\n    if(isset($_POST['stop']))\n    {\n        shell_exec('echo -n q &gt; /tmp/omx');\n    }\n\n    if(isset($_POST['volUp']))\n    {\n        shell_exec('echo -n + &gt; /tmp/omx');\n    }\n\n    if(isset($_POST['volDown']))\n    {\n        shell_exec('echo -n - &gt; /tmp/omx');\n    }\n\n\n\n?&gt;\n\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;form action=\"\" method=\"post\"&gt;\n            &lt;p&gt;Play fuel.mp3 with omxplayer&lt;/p&gt;\n            &lt;button type=\"submit\" name=\"play\"&gt;Play&lt;/button&gt;\n        &lt;/form&gt;\n        &lt;form action=\"\" method=\"post\"&gt;\n            &lt;button type=\"submit\" name=\"pause\"&gt;Pause&lt;/button&gt;\n        &lt;/form&gt;\n        &lt;form action=\"\" method=\"post\"&gt;\n            &lt;button type=\"submit\" name=\"stop\"&gt;Stop&lt;/button&gt;\n        &lt;/form&gt;\n        &lt;form action=\"\" method=\"post\"&gt;\n            &lt;button type=\"submit\" name=\"volUp\"&gt;Vol up&lt;/button&gt;\n        &lt;/form&gt;\n        &lt;form action=\"\" method=\"post\"&gt;\n            &lt;button type=\"submit\" name=\"volDown\"&gt;Vol down&lt;/button&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p> <p>run.php <pre><code>&lt;?php\n\nexec('sudo omxplayer -ohdmi /home/pitoni/fuel.mp3 &lt; /tmp/omx');\n\n?&gt;\n</code></pre></p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#linux-stuff","title":"Linux stuff","text":"<ul> <li>Linux command helper</li> </ul>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#linux-command-helper","title":"Linux command helper","text":"<p>I was starting to use Linux for the first time around the same time when I was learning programming  and I couldn't remember many of the commands so I made this to help me. </p> <p>Sources: <pre><code>#!/usr/bin/env python\n# script to view terminal commands\nimport subprocess\nimport time\nimport argparse\n\n\nsystem = {'uname -a' : 'Display linux system information',\n            'uname -r' : 'Display kernel release information',\n            'uptime' : 'Show how long the system has been running + load',\n            'hostname' : 'Show system hostname',\n            'hostname -i' : 'Display the IP address of the host',\n            'last reboot' : 'Show system reboot history',\n            'date' : 'Show the current date and time',\n            'cal' : 'Show this month calendar',\n            'w' : 'Display who is online',\n            'whoami' : 'Who you are logged in as',\n            'finger user' : 'Display information about user',\n            'Recovery' : 'Type the phrase \"REISUB\" while holding down Alt and SysRq(PrintScrn) with about 1 second between each letter. Your system will reboot.',\n            'lsb_release -a' : 'Get Ubuntu version',\n            'uname -r' : 'Get kernel version',\n            'uname -a' : 'Get all kernel information',\n            'title' : 'SYSTEM'}\n\nhardware = {'dmesg' : 'Detected hardware and boot messages',\n            'cat /proc/cpuinfo' : 'CPU model',\n            'cat /proc/meminfo' : 'Hardware memory',\n            'cat /proc/interrupts' : 'Lists the number of interrupts per CPU per I/O device',\n            'lshw' : 'Displays information on hardware configuration of the system',\n            'lsblk' : 'Displays block device related information in Linux',\n            'free -m' : 'Used and free memory (-m for MB)',\n            'lspci -tv' : 'Show PCI devices',\n            'lsusb -tv' : 'Show USB devices',\n            'dmidecode' : 'Show hardware info from the BIOS',\n            'hdparm -i /dev/sda' : 'Show info about disk sda',\n            'hdparm -tT /dev/sda' : 'Do a read speed test on disk sda',\n            'badblocks -s /dev/sda' : 'Test for unreadable blocks on disk sda',\n            'title' : 'HARDWARE'}\n\nusers = {'id' : 'Show the active user id with login and group',\n        'last' : 'Show last logins on the system',\n        'who' : 'Show who is logged on the system',\n        'groupadd admin' : 'Add group \"admin\"',\n        'useradd -c \"Toni\"' : 'g admin -m ton #Create user \"ton',\n        'userdel ton' : 'Delete user ton',\n        'adduser ton' : 'Add user \"ton\"',\n        'usermod' : 'Modify user information',\n        'title' : 'USERS'}\n\nfile_commands = {'ls -al' : 'Display all information about files / directories',\n                'pwd' : 'Show the path of current directory',\n                'mkdir directory-name' : 'Create a directory',\n                'rm file-name' : 'Delete file',\n                'rm -r directory-name' : 'Delete directory recursively',\n                'rm -f file-name' : 'Forcefully remove directory recursively',\n                'rm -rf directory-name' : 'Forcefully remove directory recursively',\n                'cp file1 file2' : 'Copy file1 to file2',\n                'cp -r dir1 dir2' : \"Copy dir1 to dir2, create dir2 if it doesn't esists\",\n                'mv file1 file2' : 'Rename source to dest / move source to directory',\n                'ln -s /path/to/file-name link-name' : 'Create symbolic link to file-name',\n                'touch file' : 'Create or update file',\n                'cat &gt; file' : 'Place standard input into file',\n                'more file' : 'Output contents of file',\n                'head file' : 'Output first 10 lines of file',\n                'tail file' : 'Output last 10 lines of file',\n                'tail -f file' : 'Output contents of file as it grows starting with the last 10 lines',\n                'gpg -c file' : 'Encrypt file',\n                'gpg file.gpg' : 'Decrypt file',\n                'wc' : 'Print the number of bytes, words, and lines in files',\n                'xargs' : 'Execute command lines from standard input',\n                'xdg-open' : 'The way to \"double-click\" on a file from the command line',\n                'title' : 'FILE COMMANDS'}\n\nprocess_related = {'ps' : 'Display your currently active processes',\n                    \"ps aux | grep 'telnet'\" : 'Find all process id related to telnet process',\n                    'pmap' : 'Memory map of process',\n                    'top' : 'Display all running processes',\n                    'killpid' : 'Kill process with mentioned pid id',\n                    'killall proc' : 'Kill all processes named proc',\n                    'pkill process-name' : 'Send signal to a process with its name',\n                    'bg' : 'Lists stopped or background jobs',\n                    'fg' : 'Brings the most recent job to foreground',\n                    'fg n' : 'Brings job n to the foreground',\n                    'title' : 'PROCESS RELATED'}\n\nfile_permissions = {'chmod octal file-name' : 'Change the permissions of file to octal',\n                    'chmod 777 /data/test.c' : 'Set rwx permission for owner, group, world',\n                    'chmod 755 /data/test.c' : 'Set rwx permission for owner, rw for group and world',\n                    'chown owhen-user file' : 'Change owner of the file',\n                    'chown owner-user:owner-group file-name' : 'Change owner and group owner of the file',\n                    'chown owner-user:owner-group directory' : 'Change owner and group owner of the directory',\n                    'title' : 'FILE PERMISSIONS'}\n\nnetwork = {'ifconfig -a' : 'Display all network ports and ip address',\n            'ifconfig' : 'Show network information',\n            'iwconfig' : 'Show wireless information',\n            'sudo iwlist scan' : 'Scan for wireless networks',\n            'sudo /etc/init.d/networking restart' : 'Reset network for manual configurations',\n            '(file) /etc/network/interfaces' : 'Manual configuration',\n            'ifup interface' : 'Bring interface online',\n            'ifdown interface' : 'Disable interface',\n            'ifconfig eth0' : 'Display specific ethernet port',\n            'ethtool eth0' : 'Linux tool to show ethernet status',\n            'mii-tool eth0' : 'Linux tool to show ethernet status',\n            'ping host' : 'Send echo request to test connection',\n            'whois domain' : 'Get information of domain',\n            'dig domain' : 'Get DNS information for domain',\n            'dig -x host' : 'Reverse lookup host',\n            'host google.com' : 'Lookup DNS ip address for the name',\n            'hostname -i' : 'Lookup local ip address',\n            'wget file' : 'Download file',\n            'netstat -tupl' : 'List active connections to / from system',\n            'nslookup server' : 'Display default gateway',\n            'title' : 'NETWORK'}\n\ncompression = {'tar cf home.tar home' : 'Create tar named home.tar containing home/',\n                'tar xf file.tar' : 'Extract the files from file.tar',\n                'tar czf.tar.gz files' : 'Create a tar with gzip compression',\n                'gzip file' : 'Compress file and renames it to file.gz',\n                'title' : 'COMPRESSION'}\n\ninstall_package = {'rpm -i pkgname.rpm' : 'Install rpm based package',\n                    'rpm -e pkgname' : 'Remove package',\n                    'title' : 'INSTALL PACKAGE'}\n\ninstall_from_source = {'./configure' : ' ',\n                        'make' : ' ',\n                        'make install' : ' ',\n                        'title' : 'INSTALL FROM SOURCE'}\n\nsearch = {'grep pattern files' : 'Search for pattern in files',\n        'grep -r pattern dir' : 'Search recursively for pattern in dir',\n        'locate file' : 'Find all instances of file',\n        'find /home/ton -name \"index*\"' : 'Find files names that start with \"index\"',\n        'find /home -size +10000k' : 'Find files larger than 10000k in /home',\n        'title' : 'SEARCH'}\n\nlogin = {'ssh user@host' : 'Connect to host as user',\n        'ssh -p port user@host' : 'Connect to host using specific port',\n        'telnet host' : 'Connect to the system using telnet port',\n        'title' : 'LOGIN'}\n\nfile_transfer = {'scp file.txt server2:/tmp' : 'Secure copy file.txt to remote host /tmp folder',\n                'rsync -a /home/apps /backup/' : 'Synchronize source to destination',\n                'title' : 'FILE TRANSFER'}\n\ndisk_usage = {'df -h' : 'Show free space on mounted filesystems',\n            'df -i' : 'Show free inodes on mounted filesystems',\n            'fdisk -l' : 'Show disks partitions, sizes and types',\n            'du -ah' : 'Display disk usage in human readable form',\n            'du -sh' : 'Display total disk usage on the current directory',\n            'title' : 'DISK USAGE'}\n\ndirectory_tranverse = {'cd ..' : 'To go up one level of the directory tree',\n                        'cd' : 'Go to $HOME directory',\n                        'cd /test' : 'Change to /test directory',\n                        'title' : 'DIRECTORY TRANVERSE'}\n\nprivileges = {'sudo command' : 'Run command as root',\n            'sudo -s' : 'Open a root shell',\n            'sudo -s -u user' : 'Open a shell as user',\n            'sudo -k' : 'Forget sudo passwords',\n            'gksudo command' : 'Visual sudo dialog (GNOME)',\n            'kdesudo command' : 'Visual sudo dialog (KDE)',\n            'sudo visudo' : 'Edit /etc/sudoers',\n            'gksudo nautilus' : 'Root file manager (GNOME)',\n            'kdesudo konqueror' : 'Root file manager (KDE)',\n            'passwd' : 'Change your password',\n            'title' : 'PRIVILEGES'}\n\ndisplay = {'sudo /etc/init.d/gdm restart' : 'Restart X and return to login (GNOME)',\n            'sudo /etc/init.d/kdm restart' : 'restart X and return to login (KDE)',\n            '(file) /etc/X11/xorg.conf' : 'Display configuration',\n            'sudo dexconf' : 'Reset xorg.conf configuration',\n            'Ctrl+Alt+Bksp' : 'Reset X display if frozen',\n            'Ctrl+Alt+FN' : 'Switch to tty N',\n            'Ctrl+Alt+F7' : 'Switch back to X display',\n            'title' : 'DISPLAY'}\n\nsystem_services = {'start service' : 'Start job service (Upstart)',\n                    'stop service' : 'Stop job service (Upstart)',\n                    'status service' : 'Check if service is running (Upstart)',\n                    '/etc/init.d/service start' : 'Start service (SysV)',\n                    '/etc/init.d/service stop' : 'Stop service (SysV)',\n                    '/etc/init.d/service status' : 'Check service (SysV)',\n                    '/etc/init.d/service restart' : 'Restart service (SysV)',\n                    'runlevel' : 'Get current runlevel',\n                    'title' : 'SYSTEM SERVICES'}\n\npackage_management = {'apt-get update' : 'Refresh available updates',\n                        'apt-get upgrade' : 'Upgrade all packages',\n                        'apt-get dist-upgrade' : 'Upgrade with package replacements; upgrade Ubuntu version',\n                        'apt-get install pkg' : 'Install pkg',\n                        'apt-get purge pkg' : 'Uninstall pkg',\n                        'apt-get autoremove' : 'Remove obsolete packages',\n                        'apt-get -f install' : 'Try to fix broken packages',\n                        'dpkg --configure -a' : 'Try to fix broken packages',\n                        'dpkg -i pkg.deb' : 'Install file pkg.deb',\n                        '(file) /etc/apt/sources.list' : 'APT repository list',\n                        'title' : 'PACKAGE MANAGEMENT'}\n\nfirewall = {'ufw enable' : 'Turn on the firewall',\n            'ufw disable' : 'Turn off the firewall',\n            'ufw default allow' : 'Allow all connections by default',\n            'ufw default deny' : 'Drop all connections by default',\n            'ufw status' : 'Current status and rules',\n            'ufw allow port' : 'Allow traffic on port',\n            'ufw deny port' : 'Block port',\n            'ufw deny from ip' : 'Block ip address',\n            'title' : 'FIREWALL'}\n\nsections = {'a' : system, 'b' : hardware, 'c' : users, 'd' : file_commands,\n            'e' : process_related, 'f' : file_permissions, 'g' : network,\n            'h' : compression, 'i' : install_package, 'j' : install_from_source,\n            'k' : search, 'l' : login, 'm' : file_transfer, 'n' : disk_usage,\n            'o' : directory_tranverse, 'p' : privileges, 'q' : display,\n            'r' : system_services, 's' : package_management, 't' : firewall}\n\nall_sections = [system, hardware, users, file_commands, process_related, file_permissions, network, compression,\n                install_package, install_from_source, search, login, file_transfer, disk_usage, directory_tranverse, privileges,\n                display, system_services, package_management, firewall]\n\n# this prints out the command sections\ndef write(dictionary, title, speed):    \n    subprocess.call(['echo', '-e', \"\\033[0m \\n \\t %s \\n\" % title])\n    for command, description in dictionary.iteritems():\n        if command != 'title':\n            subprocess.call(['echo', '-e', \"\\033[31m %s \\033[0m- %s\" % (command, description)])\n            time.sleep(float(speed))\n\n# if option is 'all', this iterates through all of the sections\ndef iterate_dictionarys(commands, speed):\n    for dictionary in all_sections:\n        title = dictionary['title']\n        write(dictionary, title, speed)\n\n# if option is 'help', this prints out a help text\ndef help():\n    subprocess.call(['echo', '-e', \"\\033[0m \\n \\t give the letter as an argument\"])\n    subprocess.call(['echo', '-e', \"\\033[0m \\t (type -s [seconds] to set print speed) \\n\"])\n    subprocess.call(['echo', '-e', \"\\033[31m %s \\033[0m- %s\" % ('all', 'SHOW ALL')])\n    for prefix, dictionary in sorted(sections.iteritems()):\n        subprocess.call(['echo', '-e', \"\\033[31m %s \\033[0m- %s\" % (prefix, dictionary['title'])])\n\n# handle system arguments\nparser = argparse.ArgumentParser()\nparser.add_argument('option', nargs = '?')\nparser.add_argument('-s', '--speed')\nparser.add_argument('second', nargs = '?')\nargs = parser.parse_args()\ndictionary = None\nif args.speed == None:\n    speed = 0\nelse:\n    speed = args.speed\nif args.option in sections.keys():\n    dictionary = sections[args.option]\n    title = dictionary['title']\n    write(dictionary, title, speed)\nelif args.option == 'all':\n    iterate_dictionarys(all_sections, speed)\nelif args.option == 'help':\n    help()\nelse:\n    subprocess.call(['echo', '-e', \"\\033[0m You must give an argument, type help to see the options\"])\n</code></pre></p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#other","title":"Other","text":"<ul> <li>BBS image scraper</li> <li>Clapswitch</li> <li>Radial drill controller fix</li> </ul>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#bbs-image-scraper","title":"BBS image scraper","text":"<p>I wrote this image scraper for MuroBBS, a finnish BBS forum I used to read back then. I just tested it and seems to work still.</p> <p>I guess the idea was that I would be able to limit my time on the forum if I just scraped full threads for images and If I found a interesting image, I could go straight to that page as the images are named as the page number.</p> <p>Usage: </p> <p>Images found on pages 110 - 119 </p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#clapswitch","title":"Clapswitch","text":"<p>Testing a clapswitch made with 8bit PIC microcontroller. I think the condenser microphone acted as a way to pull a  pull-up resistor low and then PIC would count low IO pin as a clap.</p> <p>Clapswitch controlled music on raspberry pi through GPIOs. Raspberry pi had an GPIO listener and when IO changed it would start a music player.</p> <p>Testing the clapswitch.</p> <p>Flashing the microcontroller </p>","tags":["misc"]},{"location":"Projects/Misc/old-projects/#radial-drill-controller-fix","title":"Radial drill controller fix","text":"<p>Not programming related but this happened around the same time as everything else on this page and it's pretty interesting so I'll add this as well.</p> <p>I was in this short automation installer training course and they made me fix this old radial drill. The schedule on the course was tight and we had very limited time in the workshop to put in practice what we had learned in the theory class, but I had to dedicate huge amount of that to re creating this 50 years old  radial drill controller circuit.</p> <p>Foradia radial drill </p> <p>Old controller circuit</p> <p>Those aren't normal copper wires, they are very thick and solid iron wires with some insulator on. </p> <p>Wiring the new board </p> <p>Fitting the new controller in </p> <p>New controller fitted in </p> <p>Old hand drawn schematics </p> <p>Schematics dating back to december 1967 </p> <p>Rectifier bridge and a capacitor</p> <p>Some debugging was needed. Old 230V -&gt; 24V AC to AC transformer was used and I think one of the new contactor coils required DC voltage. </p>","tags":["misc"]},{"location":"Projects/Misc/test-pages/page2/","title":"Test page","text":"<p>Code block: <pre><code>code\nhere\n</code></pre></p>"},{"location":"Projects/Motorcycles/rd350/","title":"RD350","text":"<p>Yamaha RD350 is my first motorcycle, a 350cc, twin cylinder, 2 stroke engine from the year 1988.  The full name is Yamaha RD350 YPVS F2 -88, 1WT engine. I have had it since 2015.</p> <p>Super fun bike to drive. It's very lightweight and power wheelies on first gears.</p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#specs","title":"Specs","text":"<ul> <li>350cc twin cylinder 2 stroke, 1WT engine</li> <li>Jolly moto exhaust</li> <li>V-Force reed valves</li> <li>2x 28mm Mikuni flat slide carburetors</li> <li>Zeeltronic PCDI-10VT programmable ignition and exhaust valve controller</li> <li>Iridium spark plugs</li> <li>~63HP on rear wheel</li> <li>Dry weight ~110 - 120kg ( This is an estimate, original dry weight is 141kg)</li> </ul>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#before-and-after","title":"Before and after","text":"<p>The after state is still missing rear fairings + rims and front fender should be painted. Also the bike has not been cleaned in a while.</p> <p>On the left, the day I bought it and on the right some years later. </p> <p>The bike also looked like this for a couple of years, but the rear fairing's fasterners kept breaking up from all the vibration, so I didn't want to keep fixing them. Also It's nice to change the look of the bike every now and then. </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#restoration-summary","title":"Restoration summary","text":"<p>The bike was undriveable when I got it and required a lot of work to fix it. It had countless problems, but the main issues that the bike had were here: - Gas tank was covered in rust inside - Gas lines and carburetors were covered in rust because of the gas tank. - Carburetor settings were way off, engine didn't rev or run idle. - Didn't rev or idle at all, also oil mixture was so bad that you couldn't see through the smoke from the exhaust. - Didn't know the condition of the crank or the gearbox so engine overhaul was needed. - Steering head bearing was completely done so that the handlebar couldn't be properly moved. - Front fork oil seals were leaking. - Bad battery - Fairings had bad paint and looked like crap so new fairings and seat were needed and a paint job. - A lot of weird \"fixes\" that the old owner had done which needed to be fixed again.</p> <p>The bike had been sitting in a garage for the past 5+ years before I bought it so a complete engine rebuild  and overhauling pretty much every part of the bike was necessary.</p> <p>Didn't take too long until the bike was in this condition after buying it: </p> <p>Can't remember all the details from the rebuild since I'm writing this 5 years after these photos.  I'm just going through my old photos, adding some of them here and write what I can remember.</p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#front-forks","title":"Front forks","text":"<p>Front forks removed </p> <p>Changing the front fork seals. </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#steering","title":"Steering","text":"<p>Old top yoke steering bearing. The bike didn't handle very well because the steering bearing had some damage done to it. The steering would get a little bit stuck everytime when the handle bar was straight. </p> <p>New steering bearing fitted. New bearings were these taper roller bearings, old ones were ball bearings. </p> <p></p> <p>New top yoke. Had to buy it to be able to install a new handlebar that I bought.  New handlebard wouldn't fit straight in because the old top yoke was meant for clip-on handle bars. </p> <p>Fitting in a new handlebar. Though later on I have changed it to a different one. </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#rear-swingarm","title":"Rear swingarm","text":"<p>Rear swingarm, linkage and shocks looked like they had seen alot so I took them apart, bought new spacers + other parts and added new lubrication.</p> <p>Taking the rear swingarm apart. </p> <p>Axle and spaces removed </p> <p>Rear shock </p> <p>Rear swingarm cleaned </p> <p>Rear swingarm, linkage and shock cleaned. </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#engine-and-transmission","title":"Engine and transmission","text":"<p>The engine didn't run very well and it was crazy to even run the engine without knowing the condition of it. The engine had been sitting still for 5 years so it had to be taken apart and refurbish it.</p> <p>Exhaust valve cable adjuster cover was broken, had to find a replacement from ebay </p> <p>Taking the engine apart </p> <p>Engine had probably seized at some point, piston and cylinder barrels didn't look so good </p> <p></p> <p>Scratches in the cylinder barrel. I had to send the cylinders to a machine shop so they could refurbish  the cylinders by drilling a bigger hole in it. </p> <p>Cleaning YPVS exhaust valves. Later on I ordered used YPVS valves from ebay. They arent cheap.. </p> <p>Next, taking the crank case apart. Starting from the clutch. </p> <p></p> <p>Had to make a tool to hold the clutch in place while loosening the nut + a little leverage for the ratchet \ud83d\ude01. </p> <p>Behind the clutch </p> <p>On the other side, removing the magneto. </p> <p>Magneto removed </p> <p>Taking the crank case apart </p> <p>Crank case open </p> <p>Crank and gearbox disassembled </p> <p>Outer crank bearings were making noise so the crank had to be sent to the machine shop with the cylinders. Crank was also measured properly in the machine shop to make sure it wasn't bent.</p> <p>New pistons. Cylinder + crank arrived from the shop. </p> <p>New V-Force reed valves for crispier revving. </p> <p>Complete Gasket set, clutch plates + clutch springs and exhaust valve seal kit </p> <p>Refurbished cylinder </p> <p>Refurbished crank </p> <p>One of the crank bearings was not properly in place when it arrived from the shop, no biggie. </p> <p>A little crank bearing adjustment </p> <p>Assembling the crank case and gearbox </p> <p>Putting crank cases back together with some gasket sealant </p> <p>Building the clutch. </p> <p>Clutch plates in place </p> <p>Building the top of the engine </p> <p>Placing the piston rings to the cylinder to measure the piston ring clearance </p> <p>Measuring piston ring clearance </p> <p>Pistons and piston rings in place </p> <p>Cylinders in place </p> <p>Placing the cylinder head gasket </p> <p>Assembling the cylinder head </p> <p>Assembling the coolant hose and reed valves </p> <p>Engine pretty much built up, thermostat missing still </p> <p>Engine in place </p> <p>Transmission oil, coolant liquid and 2 stroke oil. Carburetors, cooling system, YPVS and so on had to be assembled  at this point also, didn't take pictures though, not that interesting. At the background there is one of the carburetors diving in diesel to clean it, more on this in the tank and fuel lines section. </p> <p>First start ! \ud83d\ude0e </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#exhaust","title":"Exhaust","text":"<p>Got to have some performance exhaust on two strokers. More lightweight, more power, better sounds. I didn't find any recordings of my own of jolly moto pipes on RD, but here are some youtube clips:</p> <ul> <li>https://www.youtube.com/watch?v=f0G3IVtEQms ( Dyno clip, I have pretty much same specs as this bike )</li> <li>https://www.youtube.com/watch?v=iK_on_AbUfI ( Driving clip, bigger carburetors though )</li> </ul> <p>Received the exhaust </p> <p>Jolly moto wouldn't sell straight from the factory so I had to contact some swedish moped shop and order the pipes trough them, they added some stickers and sunglasses to the package. </p> <p>Jolly moto performance exhaust </p> <p>Left pipe wouldn't fit because the spring holder on the kick stand would get in the way. </p> <p>I relocated the spring holder by welding it to the other side of the kick stand </p> <p>Exhaust fitted </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#tank-and-fuel-lines","title":"Tank and fuel lines","text":"<p>Most annoying part of this whole project was trying figure out how to remove the rust from the gas tank. The rust would immediately clog the fuel filters and the jets in the carburetors. I battled with this problem for weeks and tried several different methods.</p> <p>Rust in the carburetor float bowl. This thick rust/fuel/oil mixture would clog the jets immediately. </p> <p>Also the jets were in very bad shape. Probably not due to rust though. They had this weird coating on. </p> <p>The needle jet broke way too easily. </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#removing-the-rust","title":"Removing the rust","text":"<p>Method number 1. I bought a liter of this expensive rust removal chemical from the local hardware store.</p> <ul> <li>https://m.motonet.fi/fi/tuote/602124/Dinitrol-Annitrol-Ruosteenpoistoaine-1l</li> </ul> <p>First I removed the fuel tap and replaced it with this piece of plexi glass and an o-ring to prevent the chemical from flowing out. </p> <p>The problem with this one was that this would only cover only a small portion of the gas tank.  The chemical has to sit still for hours so doesn't help if you shake the tank. </p> <p>Chemical removed. It did remove the rust from where the chemical was and a clear line with rust can be seen. </p> <p>The tank had to be placed in all positions and hope that the chemical would clean the whole tank. </p> <p></p> <p>Placing the tank in different positions didn't really help because the spot where the chemical removed the rust  would start to just rust almost immediately after removing the chemical.</p> <p>Tried to check the tank for rust with this camera + light setup. </p> <p>Lots of rust can be seen in the camera view on the laptop </p> <p>So I had to give up with this one and come up with something better.</p> <p>Method number 2. I went to a local agri market and bought 4 kilos of citric acid. This can be mixxed up with water so that it covers the whole tank.</p> <p>First I decided to put some screws to the tank so I could shake the tank and remove the biggest rust sections. </p> <p>The screws worked quite well and I was able to remove this pile of rust from the tank </p> <p>Filled the tank with citric acid and water mixture </p> <p>I made a custom cap for the tank so that the acid would not break the seals on the normal fuel tank cap. </p> <p>I let it sit there for a day, removed the acid and I could see the tank rusting before my eyes. So that didn't work out either. </p> <p>Method number 3. I found this tank rust removal and zincing kit online for about 60\u20ac and decided to try it. Can't remember the name of the kit sadly, it was the method that finally worked. </p> <p>It had 3 parts, some rust removal chemical, some sort of anti rust chemical and finally a zinc paint. </p> <p>The rust removal chemical would need to be added to the tank and shake it properly so that every part of the tank is covered. Then drain out the rust removal chemical and add the anti rust chemical, again proper shaking required. Drain out the anti rust chemical and finally add the zinc paint to the tank and make sure the zinc covers every part of the tank.</p> <p>Draining the zinc paint out of the tank. </p> <p>The result </p> <p>I checked the insides of the tank last year ( 2019 ) and the zinc has stayed in there with zero rust. I added the zinc in the tank in 2015.</p> <p>Taking the carbs apart </p> <p>Cleaning the jets and other parts </p> <p>Cleaning the fuel tap </p> <p>I eventually changed the fuel tap entirely. Don't remember why, maybe it was broken or impossible to clean. Original Yamaha fuel tap. </p> <p>Cleaning the carbs by placing them into diesel </p> <p></p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#fairings-and-paint","title":"Fairings and paint","text":"<p>I think the bike looked like crap when I bought it so it had to be painted. Also the last owner build the rear fairing using wood and what not so it weighted a ton. Had to buy new fairings because of it.</p> <p>Took apart the wooden rear fairing thing from the last owner. </p> <p>Found these original rear fairings from ebay </p> <p>I hunted for this little piece for a month from the internet and this cost something like 75\u20ac!  It belongs to the back of the seat, to the rear fairings connecting the right and left side.</p> <p>Didn't know anyone with a 3d printer at the time, it would have been a lot cheaper and faster to just print one.</p> <p>I had to also buy a new seat ( back there in the box ) because the old owner sawed the old seat in half to fit the wooden rear fairing.  </p> <p>Got a new seat cover aswell </p> <p>Removing the old seat cover </p> <p>Old seat cover removed </p> <p>New seat cover fitted to the seat. It is stapled on. </p> <p>Testing how the seat would look like </p> <p>Having some paints made at a paint shop, trying to select a color closest to the white leather on the seat cover. </p> <p>Had these paint cans made. They are proper car paint in a spray can. There's also a primer, a lacquer  and some acetone for cleaning the fairings and tank before painting. </p> <p>Removing paint from the tank </p> <p>Sanding the fairings to get rid of the old paint </p> <p></p> <p>Fixing some bumps and scratches with filler </p> <p>Fairings and tank ready for painting </p> <p>Fairings painted </p> <p></p> <p>Tank painted </p> <p></p> <p>Comparing the result to the front light mask </p> <p>Comparing the result to the seat cover </p> <p>Putting it all together </p> <p></p> <p>I was too lazy to sand the front fender because it is more a complex shaped piece so I didn't paint it. I thought I would paint it later but at least haven't yet painted it 5 years later.</p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#wheels","title":"Wheels","text":"<p>Original rear rim had a huge bump in it so it would wobble a lot while driving, new ones had to be hunted from ebay. </p> <p>Bought rims on ebay </p> <p>Found a pair of rims with tires and brake disks </p> <p>Cleaned them and changed the wheel bearings </p> <p></p> <p>Also changed the sprockets and bought a new chain </p> <p>Checking what would they look like fitted in </p> <p></p> <p>Rims changed </p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#electronics","title":"Electronics","text":"<p>Old meters and headlight looked awful without front fairings and weighted a ton, so I decided to install a lightweight mask ligth. </p> <p>Old wirings were a mess. Also includes all sorts of weird connections done by the old owners during the last 30 years. </p> <p>New mask, blinkers and speed meter. I also bought a temperature meter for the liquid coolant  ( Temperature sensor is in the cylinder head, measuring the liquid coolant ) </p> <p>Koso speed meter </p> <p>Testing the speed meter </p> <p></p> <p>Testing the front light. </p> <p>Testing the arrow head blinkers </p> <p>Had to change this old blinker relay as well to make the new LED blinkers work. </p> <p>Testing temperature meter </p> <p>Installed this programmable ignition + exhaust valve control system. Also bought it with this handheld programmer tool ( Zeeltronic PCDI-10VT ). </p> <p></p> <p></p> <p>I installed it so that I could easily just remove the seat, plug in the programmer and adjust settings. </p> <p>With the zeeltronic programmer, I can adjust the ignition timings and at which rpm area will the exhaust valve start to open and close.</p>","tags":["motorcycles"]},{"location":"Projects/Motorcycles/rd350/#summary","title":"Summary","text":"<p>I have been writing this post quite some time now, mainly because finding good pictures from the old albums is time consuming, I think it's best to end the post here.</p> <p>These pictures include the main things I did during the restoration, but I have countless of pictures from after the restoration because 30 year old bikes tend to break alot. Especially 2 stroke engines with a driving style like mine and when the total amount driven with this is somewhere around 80 000km. </p> <p>To be honest the bike has been like this for the past 2 yers. Though I drove something like 12 000km with it before this state. Also I had to open the engine at least once during those 12 000 kilometers.  The engine has been in the back of my garage since the head gasket blew up.</p> <p>Didn't find motivation to rebuild the engine yet since one of the cylinder head bolts has bigger threads than what can fit through the head gasket, which is 3 layered metal gasket so it's not easy to drill it bigger without having the edges of the bolt holes thickening.</p> <p>I have had all the required parts to fix it for a while now. Maybe during the next winter I'll finally fix it, not that big of a deal especially after this sort of restoration.</p>","tags":["motorcycles"]},{"location":"Projects/Web/git-pages/","title":"Git pages","text":""},{"location":"Projects/Web/git-pages/#description","title":"Description","text":"<p>Some notes on how to setup a Github Pages website that is hosted on and served from a public Github repository.</p> <p>Upsides are that it's pretty effortless to maintain and add new content with Github CI pipeline ( auto build/deploy site ) and it is free ( if using default 'user.github.io/repo' domain ). </p> <p>Downside is that the free-tier of Git LFS storage and bandwidth limits exceed pretty fast ( 1 GiB of storage and 1 GiB a month bandwidth ). I pay $5/month for 50GB storage and 50GB bandwidth.</p> <pre><code># My workflow with this setup if usually something like this:\n1. Move to the local repository\n2. code .\n3. Open a file and 'Open preview to the side'\n4. Edit some notes\n5. Commit and push\n\n# Occasionally, instead of 'open preview to the side' I use 'mkdocs serve'\n# to run a local web page if I need to see how the formatting, table of contents\n# and other layout related things look like\n</code></pre>"},{"location":"Projects/Web/git-pages/#tools-needed","title":"Tools needed","text":"<ul> <li>Github account</li> <li>Git</li> <li>Git LFS ( Needed for images, videos and other binary data )</li> <li>Python</li> </ul>"},{"location":"Projects/Web/git-pages/#setup-git-and-git-lfs","title":"Setup git and git lfs","text":"<pre><code># Setup Git\nhttps://git-scm.com/download/win\n\n# Create a common folder where your Git repositories go, for example\nC:/work/git/\n\n# Install Git LFS\nhttps://git-lfs.com/\n\n# You should have 'Git Bash' installed in Windows, open it and\ncd /c/work/git\n\n# Setup Git LFS\ngit lfs install\n\n# Add files to LFS separately by filetype\ngit lfs track \"*.png\" \ngit lfs track \"*.jpg\" \n\n# OR add all binary data to same folder and add only that\ngit lfs track \"binary_data_folder/**\"\n</code></pre>"},{"location":"Projects/Web/git-pages/#setup-env","title":"Setup env","text":"<pre><code>python -m venv venv\nsource venv/Scripts/activate\n\n# Install dependencies\npip install mkdocs-material\n\n# ( Optional ) Install other dependencies\npip install mkdocs-git-revision-date-localized-plugin\npip install mkdocs-glightbox\n\n# Create new project\nmkdocs new .\n\n# Run local page:\nmkdocs serve\n</code></pre>"},{"location":"Projects/Web/git-pages/#setup-builddeploy-pipeline","title":"Setup build/deploy pipeline","text":"<pre><code># Create Git workflow setup\nmkdir projects/.github/workflows\ntouch ci.yml\n\n\n# Add to ci.yml:\nname: ci \non:\n  push:\n    branches:\n      - master \n      - main\npermissions:\n  contents: write\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n        with:\n          lfs: true\n      - uses: actions/setup-python@v4\n        with:\n          python-version: 3.x\n      - uses: actions/cache@v2\n        with:\n          key: ${{ github.ref }}\n          path: .cache\n      - run: git lfs checkout\n      - run: pip install mkdocs-git-revision-date-localized-plugin\n      - run: pip install mkdocs-glightbox\n      - run: pip install mkdocs-material \n      - run: mkdocs gh-deploy --force\n</code></pre> <p> Note: <code>lfs: true</code> this did not work for me, had to add the <code>- run: git lfs checkout</code> step to make Git Pages load images from Git LFS</p>"},{"location":"Projects/Web/git-pages/#add-content","title":"Add content","text":"<pre><code># Project structure is as follows:\n- .github/\n  - workflows/\n    - ci.yml\n- docs/\n  - Projects/ # Name can be whatever\n    - Project/ # Name can be whatever\n      - git-pages.md # Name can be whatever, this will Show up as 'Git pages' link\n  - stylesheets/ # Optional, for custom themes\n    - styles.css\n  - venv/ # Created by python, add to .gitignore\n  - index.md # This is the home page\n- .gitignore\n- .gitattributes\n- mkdocs.yml\n\n# Create the above file structure and keep adding Project/ folders and .md files\n# under them. Alternatively, you can create sub folders under the Projects/ to\n# add gategories\n</code></pre> <p>For example, this page is just a markdown file here:</p> <p>https://github.com/protoni/projects/blob/main/docs/Projects/Web/git-pages.md</p>"},{"location":"Projects/Web/git-pages/#setup-custom-domain-name-eg-protonifi","title":"Setup custom domain name ( e.g. protoni.fi )","text":"<p>I have added some notes on my notes/ site on how to setup custom domain and email</p> <p>https://protoni.github.io/notes/Notes/network/#domains</p>"},{"location":"Projects/Web/component-storage/","title":"Component storage","text":"<p>Building a component management system.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#background","title":"Background","text":"<p>So I have accumulated a bit of a collection of electronic components, developer boards and all sorts of electronics parts for various projets and managing these has been a mess so far. Most of them are still in these boxes that they were delivered in, lying around in my place. I have managed to label a small portion of them with a part number and added them to an excel sheet, but I'm not really satisfied with this solution.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#alternatives","title":"Alternatives","text":"<p>I also tried a bunch of free component management systems and everytime they seemed to be missing some key functionality that I need/want.  There was a one potential open source component management system called Partkeepr that seems to have everything. </p>","tags":["web"]},{"location":"Projects/Web/component-storage/#setting-up-partkeepr","title":"Setting up Partkeepr","text":"<ul> <li> <p>I tried setting that up first to my Windows machine, got a bunch of errors and on the website it says: Windows is not supported, so proceed on your own risk. so I gave up on that idea.</p> </li> <li> <p>Then I decided to try to install it on a VPS ( virtual private server ). Spinned up my droplet on DigitalOcean and tried to setup Partkeepr there. Turns out that the composer tool that the setup uses, requires something like 4GB of RAM to work.  That would be pretty costly to run on a VPS.</p> </li> <li> <p>Lastly I setup my raspberry pi, hoping that I could run Partkeepr on that. I spent the whole night trying to get the partkeepr to work. I wrote my notes here, although they got left unfinished:</p> </li> <li>https://protoni.github.io/notes/Notes/random/?h=partkeep#partkeepr-setup</li> </ul> <p>127 lines of notes.</p> <p>If I remember correctly at the end I had an issue where the install system would complain about some parameters.php file not being on the file system, and to generate that said file, I must visit the install system that doesn't work without that file..</p> <p>Then I noticed that on the PartKeepr website there are instructions on how to run PartKeepr from Git. The instructions were pretty short so I decided to try that.  Again, errors after errors so I just gave up. Maybe I was doing something very wrong here or it just really is a overly complex system. The project owners also seem to have stopped maintaining the project 3 years ago.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#conclusion","title":"Conclusion","text":"<p>I finally started developing my own component storage solution using React front end + NodeJS backend.  Mainly to just learn/re-learn React and refresh my memory on javascript world. This was my decision anyway even before trying open source / free alternatives. It's probably not going to be very fancy, just a simple website that supports the few functionalities that I actually need from such a system.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#current-system","title":"Current system","text":"<p>Old component management system (.csv file)</p> <p></p> <p>Components labeled with a part number</p> <p>I decided on the part numbering system years ago without giving it much of thought and I'm too lazy to change it at this point. Basically all the dev boards, shields and so on has a 'A' prefix, electronic components has a 'B' prefix, misc parts has a 'C' prefix. The numbers just increment from 1. </p> <p>In the component storage system I'll probably add zero padding to the front of the part number to make them all equal lengths. So the part numbers will be something like B0000137, B0000007 and so on. The label it self doesn't need the zero padding. </p> <p>Storage organizers for the parts</p> <p>Bought these storage organizers for this project + theres a bunch of boxes and bags waiting to get in to the system. </p>","tags":["web"]},{"location":"Projects/Web/component-storage/#setup","title":"Setup","text":"<p>React front end up</p> <p>Copy pasted some basic React setup from one of my old projects that was left unfinished.  Basic routing for the navigation bar was done already and some styles + themes to make the site not look like a blank white page,  just had to scrap some stuff away to make it a good starting point for this project. </p> <p>Added some input fields for the component. These field names and component info will most likely change as I develop this further. </p> <p>Backend call</p> <p>Got a basic NodeJS backend setup  up and testing the connection with React to the backend. Front-end is running on http://localhost:3000/ and Backend on http://localhost:3001/. </p> <p>MySQL database</p> <p>Got a database setup for the project. I got the backend code from my old project as well, which also used mysql for a database so after a few struggles I got a data flowing from the front end to the database. </p> <p>I just noticed that also the database seems to still include a table called 'blog_posts' from the old project, even though I just installed the MySQL server \ud83d\ude01 Not sure if old backend code managed to do a backend call or are the databases saved to the same place and the old tables were loaded. </p> <p>Raspberry pi</p> <p>I flashed a new Linux image to a SD card and booted it with one of the raspberry pi's that I have lying around. I got the React + NodeJS + MySQL setup to run on there as well but building the code is so slow so I moved my dev environment to my Windows machine.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#adding-basic-functionality","title":"Adding basic functionality","text":"","tags":["web"]},{"location":"Projects/Web/component-storage/#list-all-components","title":"List all components","text":"<p>Couldn't really decide on what to work on first, so I decided to build a dynamic table to show all the components.  There is no pagination yet though, I'll probably do that later when I start to have lots of actual components in the database.  I'm using React bootstrap front-end framework for the project and it seemed to have a ready made pagination component so I'll probably use that one. </p>","tags":["web"]},{"location":"Projects/Web/component-storage/#adding-components","title":"Adding components","text":"<p>I decided to hide the 'add component' functionality to a modal. I don't really like to use modals but for this I think it's better than to redirect to another page for example. Also some sort of drop downs for long forms are annoying. </p> <p>..I really have no idea how to develop websites or what is a good user experience, I just try to get things to work first and then make them better (maybe). </p> <p>Component view</p> <p>The component listing without any input fields is a bit more clear now I think. Clicking 'Add' button will open the modal that contains input fields to add a component. </p> <p>New layout</p> <p>Native html fields were ugly and the layout was kind of all over the place so I decided to work on that a little. This uses the React bootstrap input forms. </p>","tags":["web"]},{"location":"Projects/Web/component-storage/#attachments","title":"Attachments","text":"<p>One functionality that wasn't done very well or was missing completely from the free alternatives, is the ability to attach files to a component. For example images, datasheets, example code/drives and various zip files.</p> <p>Testig drag and drop file upload</p> <p>Dragging and dropping a file on the \"Try dropping files here..\"-text and console logging the file object. </p> <p>Preview images when dropped </p> <p>Sending the files to the backend for storing</p> <p>Using requests from superagent package to handle the file upload. File storage is a folder on the repository for now ( added in .gitignore).</p> <p></p> <p>Preview support for other file types </p> <p>Styling the drag and drop box </p> <p>Upload folder structure</p> <p>A folder is created to the main filestorage for each component that has file attachments.  Folder name is the part number ( ID field in the table ) of the component. </p> <p>Summary</p> <p>It was a bit more complex to make this work than I originally thought. Some key notes: - Basically when a component is added, the input field data, and all the files are sent as a separate requests to the backend. - I couldn't figure out how to add the part number or some ID to the file post request. - The file upload requests sometimes ended up to the backend first and since they are without an ID they need to wait for the component data request to arrive.</p> <p>The file upload still needs some work, but it's good enough at least for now.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#view-component","title":"View component","text":"<p>Part number ( 'ID' column currently ) is a clickable link that is routed to a component's own view </p> <p>Component view + storage folder</p> <p>A placeholder layout for a single component view page + component's file structure </p> <p>Download files</p> <p>Attachment file can be downloaded by clicking the filename. </p>","tags":["web"]},{"location":"Projects/Web/component-storage/#summary","title":"Summary","text":"<p>I have been working on this project for a week now, a couple of hours in the evenings and it seems to be moving forward quite nicely, learned a lot so far. I'll probably end this post here and do a some 'component storage update' post when I have more progress done and pictures taken. </p> <p>I don't like to keep writing these posts as I go along with the projects so I just write these in one sitting and be done with them. I just decided that this is a good break point to write things down before I forget them.</p> <p>The component storage system obviously has alot of things left to do and a few key functionalities missing like search and an edit component functions, more on that in the TODO section.</p>","tags":["web"]},{"location":"Projects/Web/component-storage/#todo","title":"TODO","text":"<p>Not a complete list, just throwing things here from the top of my head.</p> <ul> <li>[x] Setup dev env</li> <li>[x] Front-end and backend setup</li> <li>[x] Preliminary component listing page</li> <li>[x] Preliminary component view page</li> <li>[x] Preliminary component add function</li> <li>[x] Preliminary file uploader</li> <li>[x] File handling on the backend</li> <li>[ ] Search component-function</li> <li>[ ] Edit component-function</li> <li>[ ] Figure out proper names for component data fields</li> <li>[ ] Add proper layout for the single component view page.</li> <li>[ ] File upload system in 'add component' view needs an option to select thumbnail picture</li> <li>[ ] Item type selector to the 'add component'-view ( component, dev board, misc ).</li> <li>[ ] Change input fields based on the type in the 'add component'-view.</li> <li>[ ] Add tests</li> <li>[ ] Remove files-button in add component-view.</li> <li>[ ] Re-structure backend code</li> <li>[ ] Bulk import components from .csv</li> <li>[ ] Image / pdf / text file viewer to the single component view page</li> <li>[ ] Auto backup system for the database and attachment files</li> </ul>","tags":["web"]},{"location":"Projects/Web/component-storage-update/","title":"Component storage update","text":"<p>A few weeks has passed since I last did a post about the storaging system so  need to write some things down at this point before I forget everything.</p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#linter","title":"Linter","text":"<p>After working for a week on the project, before my last post, the code started to look a bit messy and  I had not setup any linters or testing setups so it was time for that.</p> <p>I setup eslint with airbnb settings and prettier for React front-end setup. I spent probably one whole night setting up the eslint because it either didn't work with VScode or npm kept complaining about mismatching eslint versions. Finally got it to work after removing package-lock.jsons, removing node_modules and running npm installs enough times. Of course reverted to a version that seemed to be accepted by npm install:</p> <pre><code>\"devDependencies\": {\n    \"eslint\": \"^6.6.0\",\n    ...\n}\n</code></pre> <p>Backend code got the same setup. It was painless and fast to install it for NodeJS.</p> <p>Spent a few nights learning and fixing linter errors. There's still plenty, but I'll keep fixing them as I go along with the development instead of spending the next days only fixing them, otherwise I will lose the motivation pretty fast for the project.</p> <p>Linter seems to really help with getting the code a bit more clean. Also the 'auto fix all' option is pretty neat,  it can autocorrect all indenting issues and other boring tasks.</p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#testing","title":"Testing","text":"<p>I wanted to get a bit more familiar with testing the front-end and backend code so I started reading about what is the best way to test these things. It was few weeks ago at this point and I already forgot pretty much everything. I need to get back to reading about this if and when motivation for such a thing arrives. But in short, this is what I did:</p> <p>For front-end I installed react-testing-library and jest , created a new folder called src/__test__ and added a few test files in there. The other test file tests all of the routing and the other one tests various components that they render properly.</p> <p>Examples:</p> <p>routing test <pre><code>test('routes correctly', () =&gt; {\n  render(&lt;Router&gt;&lt;App /&gt;&lt;/Router&gt;);\n\n  // check that we start from Home page\n  expect(screen.getByTestId('Home')).toBeInTheDocument();\n\n  // Click Storage link\n  const leftClick = { button: 0 };\n  userEvent.click(screen.getByTestId('StorageLink'), leftClick);\n\n  // Check that we changed to the Storage page\n  expect(screen.getByTestId('ComponentStorage')).toBeInTheDocument();\n\n  // Click Status text link\n  userEvent.click(screen.getByTestId('StatusLink1'), leftClick);\n\n  // Check that the status bar is showing\n  expect(screen.getByTestId('Status')).toBeInTheDocument();\n\n  // Click Status icon link ( Double click because it is toggled )\n  userEvent.click(screen.getByTestId('StatusLink2'), leftClick);\n  userEvent.click(screen.getByTestId('StatusLink2'), leftClick);\n\n  // Check that the status bar is showing\n  expect(screen.getByTestId('Status')).toBeInTheDocument();\n\n  // Click Status text link\n  userEvent.click(screen.getByTestId('SettingsLink1'), leftClick);\n\n  // Check that the status bar is showing\n  expect(screen.getByTestId('Settings')).toBeInTheDocument();\n\n  // Click Status icon link ( Double click because it is toggled )\n  userEvent.click(screen.getByTestId('SettingsLink2'), leftClick);\n  userEvent.click(screen.getByTestId('SettingsLink2'), leftClick);\n\n  // Check that the status bar is showing\n  expect(screen.getByTestId('Settings')).toBeInTheDocument();\n});\n</code></pre></p> <p>Render main component <pre><code>test('renders main component', () =&gt; {\n  const { getByTestId } = render(&lt;Router&gt;&lt;App /&gt;&lt;/Router&gt;);\n  const mainElement = getByTestId('Main');\n  expect(mainElement).toBeInTheDocument();\n});\n</code></pre></p> <p>It was real pain getting this setup to work. I spent a few nights learning and setting these up. But now at this point I hope it's much simpler when I can just add new tests without having to battle with the initial setting up.</p> <p>Backend</p> <p>Didn't spent too much time on the backup testing, but I setup Mocha and Chai as a testing setup. I created a ./test folder and added some test files in it.</p> <p>Examples</p> <p>API endpoint request test using Chai-HTTP <pre><code>const chai = require('chai');\nconst chaiHttp = require('chai-http');\nconst server = require('../app');\n\nchai.should();\nchai.use(chaiHttp);\n\ndescribe('Test API', () =&gt; {\n  describe('GET /api/test', () =&gt; {\n    it('Should return success', (done) =&gt; {\n      chai.request(server)\n        .get('/api/test')\n        .end((err, response) =&gt; {\n          console.log('response:');\n          console.log(response.body);\n          response.should.have.status(200);\n          response.body.message.should.equal('success');\n          done();\n        });\n    });\n  });\n});\n</code></pre></p> <p>So will have to see when I get back to adding more tests.</p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#add-items","title":"Add items","text":"","tags":["web"]},{"location":"Projects/Web/component-storage-update/#file-upload","title":"File upload","text":"<p>Thumbnail select</p> <p>Added radio buttons to select a thumbnail image for the item. It will probably be added to the 'all components' table view later on. The radio button is disabled on files that are not images, like .zip file here. </p> <p>Delete files</p> <p>I Added an option to delete files and created a custom button style for it. </p> <p>Styling images</p> <p>Changed the image corners to rounded ones, added some borders to them and tried to line them up a little bit better. </p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#modal","title":"Modal","text":"<p>Close prompt</p> <p>I disabled the modal closing if the outside of the modal is clicked.</p> <p>Also added a close confirmation prompt when there is text written in some of the fields. In the .gif I write text to ID field, but later on I disabled the ID field entirely. The ID field is now called 'Part number' and it is auto-generated in the backend based on the previous part number. </p> <p>Add prompt</p> <p>Added a confirmation prompt when about to save the item to the database. </p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#select-item-type","title":"Select item type","text":"<p>Tabs</p> <p>Added tabs where you can select which type of item to add. So far I was planning on having a type for a components, dev boards and misc items. The input fields and available categories will probably be different for each item type in the future.</p> <p>Also added an comment field where some other information can be written about the item. For example tags for a specific project where the item is used. </p> <p>Part numbers</p> <p>Here I have disabled the part number field and in the .gif I click refresh to demonstrate that when the component loads, a request is created to the backend for generating next part numbers for each item type. Next part number is created by reading the latest part numbers from the database for each item, the part number is parsed and the index number is incremented by one. </p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#view-items","title":"View items","text":"<p>Files in item view</p> <p>Added preview images for the files when viewing a single component. Also the thumbnail that can be selected when adding a new item is shown at the top of the page. Files can still be downloaded by clicking the preview image in the file listing at the bottom of the page.</p> <p>It would be cool to do some sort of popup modal to view the images and pdf files for example, so that there is no need to download them every time.</p> <p></p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#edit-items","title":"Edit items","text":"<p>Edit items window</p> <p>Added a button to the top of the page view to edit an item. Edit view is a modified version of the 'Add components' window. </p> <p>Edit files</p> <p>I got the \"already uploaded to backend\" files to show up in the preview section of the 'edit item' window. Preview image layout and image sizes are a bit messed up here. </p> <p>The preview image list in the edit window is handling the recently uploaded files, which are Blob types and have a smaller preview image parameter that is shown here and also it handles the already uploaded files that are served from the backend. So there are a bit of difference in how the image scales.</p> <p></p> <p>Add file</p> <p>A new file can be added when editing an item. </p> <p>Delete file</p> <p>Files can be deleted also. I will probably add a some sort of 'undo' option when deleting files. </p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#summary","title":"Summary","text":"<p>Some progress has been made during the couple last weeks, although I have been working on this for a little bit less than during the first week.</p> <p>Storaging system is still not usable. Needs testing, data validation and better error handling at least. Also I'll most likely do the backup system before I add any real data to the database.</p> <p>I was also messing around with Digikey API. It seems that I can import all the component data with my order number. I mostly order from Digikey anyway, so it would be cool to just load all the images and descriptions and such from the items and save them on my system.</p>","tags":["web"]},{"location":"Projects/Web/component-storage-update/#todo","title":"TODO","text":"<p>Not a complete list, just throwing things here from the top of my head.</p> <ul> <li>[x] Setup dev env</li> <li>[x] Front-end and backend setup</li> <li>[x] Preliminary component listing page</li> <li>[x] Component view page</li> <li>[x] Component add window</li> <li>[x] File uploader</li> <li>[x] File handling on the backend</li> <li>[x] Edit component window</li> <li>[x] Figure out proper names for component data fields</li> <li>[x] Add proper layout for the single component view page.</li> <li>[x] File upload system in 'add component' view needs an option to select thumbnail picture</li> <li>[x] Item type selector to the 'add component'-view ( component, dev board, misc ).</li> <li>[x] Add front-end testing environment</li> <li>[x] Add backend testing environment</li> <li>[x] Remove files-button in add component-view.</li> <li>[x] Re-structure backend code</li> <li>[x] Setup linters</li> <li>[ ] Add more tests</li> <li>[ ] Search component-function</li> <li>[ ] Change input fields based on the type in the 'add component'-view.</li> <li>[ ] Bulk import components from .csv</li> <li>[ ] Image / pdf / text file viewer to the single component view page</li> <li>[ ] Auto backup system for the database and attachment files</li> <li>[ ] Improve error handling</li> <li>[ ] Improve data handling</li> <li>[ ] Input validation to add and edit component windows</li> <li>[ ] Add storage history system</li> <li>[ ] Pagination to all components view</li> <li>[ ] DigiKey API support</li> </ul> <p>Handling the tasks on trello </p>","tags":["web"]},{"location":"Projects/Web/old-gatsby-site/initial-commit/","title":"Initial commit","text":"","tags":["misc"]},{"location":"Projects/Web/old-gatsby-site/initial-commit/#about","title":"About","text":"<p>So I made this github hosted and netlifycms served gatsby-site for testing purposes and to documentate some of the things I work on on my spare time.</p> <p>I used to have a website running on wordpress.com, got bored of it due to lack of customizability and moved to self hosted  wordpress.org, didn't like that either and now I'm trying this stack.</p> <p>I like how easy this was to setup. The default gatsby theme is fully customizable  and adding new content is really easy, just git push new content to github and netlifycms build system starts building/publishing the changes.</p> <p>Here, have a look at this confusing gif I made: </p>","tags":["misc"]},{"location":"Projects/Web/old-gatsby-site/initial-commit/#links","title":"Links","text":"<ul> <li>https://github.com/</li> <li>https://www.netlifycms.org/</li> <li>https://www.gatsbyjs.org/</li> <li>https://github.com/protoni/gatsby-starter-blog</li> </ul>","tags":["misc"]},{"location":"Projects/Web/old-gatsby-site/setup-gatsby-site/","title":"Setup a static website","text":"","tags":["web"]},{"location":"Projects/Web/old-gatsby-site/setup-gatsby-site/#about","title":"About","text":"<p>Static websites are easy to setup, secure, low maintenance and they are fast.  They can also be hosted on for example GitHub, so no need to pay for a host machine.</p> <p>Google PageSpeed Insights: </p> <p>I was a bit confused at first on what is the best way to set this thing up. At first I followed the netlifycms \"get started\"-guide, but found out later that it's so much easier to setup straight from the Gatsby Starter Library. So I thought I would add some notes on how to actually set this stack up.</p>","tags":["web"]},{"location":"Projects/Web/old-gatsby-site/setup-gatsby-site/#setup-a-public-site","title":"Setup a public site","text":"<ol> <li> <p>Head on to https://www.netlify.com/ and register if not registered already</p> </li> <li> <p>Go to Gatsby Starter Library: https://www.gatsbyjs.org/starters/ and select a starter site. I selected the  gatsby-starter-blog because it's minimal and fast.</p> </li> <li> <p>Scroll down a bit and click the little Netlify icon under the preview image to set it up </p> </li> <li> <p>Click Connect to GitHub ( Or GitLab ).</p> </li> <li> <p>Login and connect your account.</p> </li> <li> <p>Set a repository name and click Save &amp; Deploy</p> </li> <li> <p>Wait for the site to deploy</p> </li> <li> <p>Follow the 3 step process to setup domain and SSL for your site. </p> </li> <li> <p>At this point, after finishing the 3 step process, the setup is already done.  Allow some time for the DNS changes to take effect and your site will be online.</p> </li> </ol>","tags":["web"]},{"location":"Projects/Web/old-gatsby-site/setup-gatsby-site/#setup-a-local-dev-env","title":"Setup a local dev env:","text":"<ol> <li>Go to https://github.com/ and login to your account ( or GitLab )</li> <li>Netlify has created a repository for the gatsby site, clone the repo</li> <li>Download and setup NodeJS: https://nodejs.org/en/</li> <li>After installing, open Node.js command prompt</li> <li> <p>Move to your gatsby repo that you just cloned:</p> <p><code>cd your-gatsby-repo</code> 6. Install npm packages</p> <p><code>npm install</code> 7. Start gatsby server</p> <p><code>gatsby develop</code> 8. Local site is now up and running. Open browser and go to http://localhost:8000/</p> </li> <li> <p>Start modifying the default blog posts, author and layout the way you want.</p> </li> </ol>","tags":["web"]},{"location":"Projects/Web/old-gatsby-site/setup-gatsby-site/#links","title":"Links","text":"<ul> <li>https://github.com/</li> <li>https://www.netlifycms.org/</li> <li>https://www.gatsbyjs.org/</li> <li>https://nodejs.org/en/</li> </ul>","tags":["web"]},{"location":"Projects/Web/old-gatsby-site/site-in-development/","title":"Website in development","text":"","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/site-in-development/#about","title":"About","text":"<p>I'm experimenting with this site so it might be broken from time to time.  I added an notification to the index page to indicate that, it will popup every time the page is loaded.</p> <p>Decided to make a post about that too to get some content to the empty home page.</p> <p></p> <p>Tried a bunch of different notification React packages but couldn't get them to work the way I wanted. I also did my own notification component to refresh my memory on how this react and javascript stuff works  but that came out as pretty shite.</p> <p>Gladly I finally found one that worked and was easy to implement, react-toastify. The notification doesn't really look good on mobile at the moment tho.</p> <p>Did this with a few lines of code: </p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/site-in-development/#update-23072020","title":"Update 23.07.2020","text":"<p>I also added tag system to the website for easier access to related content. </p> <p>Tags can be seen on the front site below the post name and also on the individual blog post pages.</p> <p>Basically the tags are added to the frontmatter of the markdown files and so they can be queried using graphql.</p> <p>The visual layout still might need some decorating but it works. </p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/site-in-development/#links","title":"Links","text":"<ul> <li>https://www.npmjs.com/package/react-toastify</li> <li>https://www.gatsbyjs.org/docs/adding-tags-and-categories-to-blog-posts/</li> </ul>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/","title":"Website update","text":"","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/#about","title":"About","text":"<p>A short update on what I have been working on with this site.</p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/#back-to-top-button","title":"Back to top button","text":"<p>It got old pretty fast to have to scroll back up every time I reached the bottom of  the bage so I added this little icon to the bottom right corner to help with this issue. </p> <p>I tried some npm packages at first which would do this but they seemed overly complex for what the component actually does.</p> <p>I was googling around what would be the best way to implement this. I ran into this issue on github and in the comments a  user( https://github.com/donaldboulton ) shared his implementation so I decided to use that as well, seems to work pretty well and the implementation seems clean.</p> <ul> <li>https://github.com/v4iv/gatsby-starter-business/issues/23</li> <li>https://publiuslogic.com/</li> </ul> <p>I pretty much only had to change some css to adjust the position a bit. The React component had a props to adjust position but they didn't work for me for some reason, so I just changed the css.</p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/#anchor-links","title":"Anchor links","text":"<p>I really like the scrolling table of contents-component gatsbyjs.org docs has: https://www.gatsbyjs.org/docs/quick-start/.</p> <p>It it seemed like it would take some time to implement that sort of functionality so I decided to just use anchor links. I used gatsby-remark-autolink-headers-gatsby plugin to achieve this. It works well and it is easy to setup the links on posts page.</p> <p>Added skip to content -links functionality for the website. </p> <p>Simple to use: </p> <p>I had a problem with the links at first and I spent like 3 hours figuring that one out. I got the links setup right away and they actually did something as well, but they didn't still work. When I clicked one of the links, it did add the anchor to the URL bar (#-tag) but it wouldn't actually move to that location on the page.</p> <p>Turns out I had added gatsby-transformer-remark twice in my gatsby-config.js and that messed it up somehow. There was also no warning or anything when building the site so I kind of accidentally found the issue.</p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/#code-blocks","title":"Code blocks","text":"<p>I decided to modify the default code blocks a bit. Changed the color theme and added line numbers. Also the default one seemed to expand infinitely if enough code was added to it so I added a max height for it and a scroll bar.</p> <p>Default code blocks: </p> <p>Changed to : </p> <p>As always, I had some problems setting this thing up.</p> <p>The code block would do this annoying highlight on equal and plus signs: </p> <p>And another issue was that when I deployed the website, the theme would not work and the published website would just show the default theme.</p> <p>A while of head scratching and googling resulted in me realizing that the gatsby-browser.js had the default prism.css theme imported at the same time with this new one so it caused the highlighting issue. </p> <p>Decided to publish a fix and I found out that the theme did not work on published website because of this same issue. So both of these things got resolved at the same time.</p> <p>I of course also decided to download the theme css, save it to the project folder and modify it to my liking.</p> <p>The theme is prism.js okaidia and it's modified a little by me. https://prismjs.com/</p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/#categories","title":"Categories","text":"<p>Browsing content on the website felt a bit awkward so I decided to add categories to the front page. I use the tags on the markdown file frontmatter to act as categories for now.  I will probably change this in the future so that the markdown frontmatter would have tags and categories though. </p> <p>I'm not sure what would be the best way to structure the content on this site so I'm trying to categorize the content a bit. I'll probably create these short updates on some projects and I guess it would be good to have it's own gategory at that point so that the updates can be found and it would be easier to follow one specific project.</p> <p>Categories on the front page: </p>","tags":["protoni website"]},{"location":"Projects/Web/old-gatsby-site/website-update/#links","title":"Links","text":"<ul> <li>https://github.com/v4iv/gatsby-starter-business/issues/23</li> <li>https://publiuslogic.com/</li> <li>https://www.gatsbyjs.org/docs/quick-start/</li> <li>https://github.com/donaldboulton</li> <li>https://prismjs.com/</li> <li>https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/</li> </ul>","tags":["protoni website"]}]}